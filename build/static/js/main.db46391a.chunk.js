(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{138:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var a=n(19),s=n(47),r=n(1),i=n(42),c=n.n(i),o=n(3),l=n.n(o),d=n(4),h=n(23),u=n(11),b=n(13),j=n(5),m=n(6),p=n(2),g=n(9),f=n(8),O=function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();return s<10&&(s="0"+s),a<10&&(a="0"+a),s+" - "+a+" - "+n+" | "+t.getHours()+":"+t.getSeconds()},x=function(e){if(e||0==e){var t=e.toString();if(t.includes(".")){var n=t.split(".");t=n[0]}switch(t.length){case 4:return"\u20a6"+t.slice(0,1)+","+t.slice(1);case 5:return"\u20a6"+t.slice(0,2)+","+t.slice(2);case 6:return"\u20a6"+t.slice(0,3)+","+t.slice(3);case 7:return"\u20a6"+t.slice(0,1)+","+t.slice(1,4)+","+t.slice(4);case 8:return"\u20a6"+t.slice(0,2)+","+t.slice(2,5)+","+t.slice(5);case 9:return"\u20a6"+t.slice(0,3)+","+t.slice(3,6)+","+t.slice(6);default:return"\u20a6"+t}}},v=function(e){switch(e){case 1:return"January";case 2:return"Febuary";case 3:return"March";case 4:return"April";case 5:return"May";case 6:return"June";case 7:return"July";case 8:return"August";case 9:return"September";case 10:return"October";case 11:return"November";case 12:return"December"}},_=n(0);function k(e){return Object(_.jsx)("div",{className:"bt-item shadow",children:Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Order No."})}),Object(_.jsx)("h4",{children:e.order._id}),Object(_.jsx)("h5",{children:O(e.order.created)}),Object(_.jsx)("br",{}),Object(_.jsxs)("button",{onClick:function(t){return e.showOrderItems(t,e.order)},className:"bt-btn blue-bg",children:[e.order.cart.drinkQuantityList.length," items ordered"]}),Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Total Cost"})}),Object(_.jsx)("h5",{children:x(e.order.cart.totalPrice+e.order.cart.tax+e.order.cart.delivery_cost)})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Customer Name"})}),Object(_.jsxs)("h5",{children:[e.order.user.firstname," ",e.order.user.lastname]}),Object(_.jsx)("br",{}),Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Customer Phone Number"})}),Object(_.jsx)("h5",{children:e.order.user.phone_number}),Object(_.jsx)("br",{}),Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Customer Delivery Address"})}),Object(_.jsx)("h5",{children:e.order.user.delivery_address}),Object(_.jsx)("br",{}),Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Delivery Date"})}),Object(_.jsx)("h5",{children:e.order.delivery_date?e.order.delivery_date:""})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("br",{}),"fulfilled"==e.order.status?Object(_.jsx)("h5",{className:"bt-green-text",children:"Order Completed"}):Object(_.jsx)("button",{onClick:function(t){return e.markOrderAsFulfilled(t,e.order)},className:"bt-btn blue-bg",children:"Mark as fulfilled"}),Object(_.jsx)("br",{}),"fulfilled"!==e.order.status?Object(_.jsx)("button",{onClick:function(t){return e.showAgentsToAssign(t,e.order)},className:"bt-btn blue-bg",children:"Assign agent to order"}):"",Object(_.jsx)("br",{}),e.order.agent?Object(_.jsx)("button",{onClick:function(t){return e.showAgent(t,e.order)},className:"bt-btn purple-bg",children:"View Agent"}):"",Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),"fulfilled"==e.order.status?Object(_.jsxs)("h5",{className:"bt-black-text",children:["Invoice Number - ",e.order.invoice]}):""]})]})})}var C=n(7),w=n.n(C),y={margin:"16px"};function N(e){return Object(_.jsxs)(w.a,{isOpen:e.showOrderItems,className:"OrderItemsModal",overlayClassName:"Overlay",contentLabel:"Minimal Modal Example",children:[Object(_.jsx)("button",{className:"grey-bg bt-btn pull-right",style:y,onClick:e.handleCloseModal,children:"close"}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),e.order.cart.drinkQuantityList.map((function(e){return Object(_.jsx)("div",{className:"bt-item",children:Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-3 col-sm-3",children:[Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Name"})}),Object(_.jsx)("h5",{children:e.drink.name})]}),Object(_.jsxs)("div",{className:"col-md-2 col-sm-2",children:[Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Unit"})}),Object(_.jsx)("h5",{children:e.drink.unit})]}),Object(_.jsxs)("div",{className:"col-md-1 col-sm-1",children:[Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Qty"})}),Object(_.jsx)("h5",{children:e.quantity})]}),Object(_.jsxs)("div",{className:"col-md-2 col-sm-2",children:[Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Price"})}),Object(_.jsx)("h5",{children:x(e.drink.price)})]}),Object(_.jsxs)("div",{className:"col-md-2 col-sm-2",children:[Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Total Price"})}),Object(_.jsx)("h5",{children:x(e.drink.price*e.quantity)})]})]})},e.drink._id)}))]})}var A={margin:"16px"},S={float:"left"};function L(e){return Object(_.jsxs)(w.a,{isOpen:e.showAgentsToAssign,className:"Modal",overlayClassName:"Overlay",contentLabel:"Minimal Modal Example",children:[Object(_.jsx)("button",{className:"grey-bg bt-btn pull-right",style:A,onClick:e.handleCloseModal,children:"close"}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),e.agents.map((function(t){return Object(_.jsx)("div",{className:"bt-item",children:Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Name"})}),Object(_.jsxs)("h5",{children:[t.firstname," ",t.lastname]})]}),Object(_.jsxs)("div",{className:"col-md-3 col-sm-3",children:[Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Phone Number"})}),Object(_.jsx)("h5",{children:t.phone_number})]}),Object(_.jsxs)("div",{className:"col-md-2 col-sm-2",children:[Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Status"})}),Object(_.jsx)("h5",{children:!t.order||t.order.length<=0?"available":"unavailable"})]}),Object(_.jsx)("div",{className:"col-md-3 col-sm-3",children:Object(_.jsx)("h5",{children:!t.order||t.order.length<=0?Object(_.jsx)("button",{className:"green-bg bt-btn",style:S,onClick:function(n){return e.agentSelected(n,t)},children:"assign"}):Object(_.jsx)("button",{className:"bt-btn red-bg",style:S,onClick:function(n){return e.removeAgentFromRoute(n,t)},children:"unassign"})})})]})},t._id)}))]})}var F=n(62),D=n.n(F);w.a.setAppElement("#main");var E={display:"block",margin:"0 auto",border:"0px solid #000000"};function M(e){return Object(_.jsx)("div",{children:Object(_.jsx)(w.a,{isOpen:e.isLoading,className:"LoadingModal",overlayClassName:"LoadingOverlay",contentLabel:"Minimal Modal Example",children:Object(_.jsx)(D.a,{css:E,sizeUnit:"px",size:80,color:"#2E86C1",loading:e.isLoading})})})}var P=n.p+"static/media/agent_grey.235b94f2.png",I={marginTop:"50px",marginLeft:"20px"};function R(e){return Object(_.jsx)("div",{children:Object(_.jsxs)(w.a,{isOpen:e.showViewAgent,className:"ViewAgentModal",overlayClassName:"Overlay",contentLabel:"Minimal Modal Example",children:[Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-3 col-sm-3",children:Object(_.jsx)("img",{className:"bt-center",id:"image",src:null!=e.agent.avatar&&e.agent.avatar.length>0?e.agent.avatar:P,width:"60",height:"60"})}),Object(_.jsx)("div",{className:"col-md-5 col-sm-5",children:Object(_.jsxs)("h4",{children:[e.agent.firstname," ",e.agent.lastname]})}),Object(_.jsx)("div",{className:"col-md-4 col-sm-4",children:Object(_.jsx)("h5",{children:e.agent.phone_number})})]}),Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("button",{style:I,onClick:e.hideAgent,className:"bt-btn blue-bg",children:"close"})})]})})}w.a.setAppElement("#main"),w.a.setAppElement("#main");var T={marginLeft:"16px",marginRight:"8px"},U={marginLeft:"8px",marginRight:"16px"};function B(e){return Object(_.jsx)("div",{children:Object(_.jsxs)(w.a,{isOpen:e.showConfirm,className:"ConfirmModal",overlayClassName:"Overlay",contentLabel:"Minimal Modal Example",children:[Object(_.jsx)("h4",{className:"text-center blue-text",children:e.title}),Object(_.jsx)("br",{}),Object(_.jsx)("h5",{className:"text-center",children:e.message}),Object(_.jsx)("br",{}),Object(_.jsx)("button",{className:"laser-inline green-bg bt-btn",style:T,onClick:e.yesClicked,children:"yes"}),Object(_.jsx)("button",{className:"laser-inline grey-bg bt-btn",style:U,onClick:e.noClicked,children:"no"})]})})}var V={margin:"16px"},W={float:"left",marginLeft:"20px"};function K(e){return Object(_.jsx)("div",{children:Object(_.jsxs)(w.a,{isOpen:e.showOrderStatus,className:"Modal",overlayClassName:"Overlay",contentLabel:"Minimal Modal Example",children:[Object(_.jsx)("h4",{className:"text-center",children:"Message From Agent"}),Object(_.jsx)("button",{className:"grey-bg bt-btn pull-right",style:V,onClick:e.closeOrderStatus,children:"close"}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-3 col-sm-3",children:Object(_.jsx)("img",{className:"bt-center",id:"image",src:null!=e.agent.avatar&&e.agent.avatar.length>0?e.agent.avatar:P,width:"60",height:"60"})}),Object(_.jsxs)("div",{className:"col-md-6 col-sm-6",children:[Object(_.jsxs)("h5",{className:"black-text",children:[e.agent.firstname," ",e.agent.lastname," has completed the assigned order "]}),Object(_.jsxs)("h5",{children:["Order Number - ",e.agent.order]})]}),Object(_.jsxs)("div",{className:"col-md-3 col-sm-3",children:[Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Phone Number"})}),Object(_.jsx)("h5",{children:e.agent.phone_number})]})]}),Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("h5",{children:Object(_.jsx)("button",{className:"green-bg bt-btn",style:W,onClick:function(t){return e.markOrderAsFulfilledWithId(t,e.agent.order)},children:"Mark Order as fulfilled"})})})]})})}var G=n(28),H=n(33),z=n.n(H),q=n(31),$=n(65),Z=n.n($),J=n(43),Y=function e(){var t=this;Object(j.a)(this,e),this.login=function(e,n){return t.axios("/login",{username:e,password:n}).then((function(e){return t.setToken(e.data.token),e})).catch((function(e){return console.log(e),"error"}))},this.loggedIn=function(){var e=t.getToken();return!!e&&!t.isTokenExpired(e)},this.isTokenExpired=function(e){try{return Object(J.a)(e).exp<Date.now()/1e3}catch(t){return console.log("expired check failed! Line 42: AuthService.js"),!1}},this.setToken=function(e){localStorage.setItem("id_token",e)},this.getToken=function(){return localStorage.getItem("id_token")},this.logout=function(){localStorage.removeItem("id_token")},this.getConfirm=function(){var e=Object(J.a)(t.getToken());return console.log("Recieved answer!"),e},this.axios=function(e,n){var a={Accept:"application/json","Content-Type":"application/json"};return t.loggedIn()&&(a.Authorization="Bearer:"+t.getToken()),Z()({url:e,method:"post",data:n,baseURL:"https://api.bartender247ng.com/admin",timeout:3e4,headers:a}).then(t._checkStatus).then((function(e){return e})).catch((function(e){return e}))},this._checkStatus=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}},Q=(new Y).axios,X=function(){return Q("/agents").then((function(e){return e})).catch((function(e){return console.log({err:e}),"error"}))},ee=function(e){return Q("/agents/create",e).then((function(e){return e})).catch((function(e){return console.log(e),"error"}))},te=function(e){return Q("/agents/edit",e).then((function(e){return e})).catch((function(e){return console.log(e),"error"}))},ne=function(){return Q("/orders/count").then((function(e){return e})).catch((function(e){return console.log(e),"error"}))},ae=function(e){return Q("/orders/fulfill",{id:e}).then((function(e){return e})).catch((function(e){return console.log(e),"error"}))},se=function(){return Q("/drinks").then((function(e){return e})).catch((function(e){return console.log(e),"error"}))},re=function(e){return Q("/drinks/create",e).then((function(e){return e})).catch((function(e){return console.log(e),"error"}))},ie=function(e){return Q("/drinks/edit",e).then((function(e){return e})).catch((function(e){return console.log(e),"error"}))},ce=function(){return Q("/categories").then((function(e){return e})).catch((function(e){return console.log(e),"error"}))},oe=function(e){return Q("/uploads/agentavatar",e).then((function(e){return e})).catch((function(e){return console.log(e),"error"}))},le=function(e){return Q("/uploads/agentid",e).then((function(e){return e})).catch((function(e){return console.log(e),"error"}))},de=function(){return Q("/financials").then((function(e){return e})).catch((function(e){return console.log(e),"error"}))},he=function(e){return Q("/promocodes",{count:e}).then((function(e){return e})).catch((function(e){return console.log(e),"error"}))},ue=function(){return Q("/promocodes/count").then((function(e){return e})).catch((function(e){return console.log(e),"error"}))},be=function(){return Q("/users/count").then((function(e){return e})).catch((function(e){return console.log(e),"error"}))},je={float:"left"},me={background:"#797d7f",marginLeft:"8px",marginRight:"8px",width:"120px"},pe={background:"#2E86C1",marginLeft:"8px",marginRight:"8px",width:"120px"},ge=new z.a({publishKey:"pub-c-da5b31c8-45d5-4018-82be-843221a3b91c",subscribeKey:"sub-c-de1f05de-af97-11e9-a732-8a2b99383297",uuid:"Bartender247ng"});function fe(){return Object(_.jsx)(q.a,{client:ge,children:Object(_.jsx)(Oe,{})})}var Oe=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).handleOnDocumentBottom=function(){switch(a.state.order_type){case"all":a.getOrders();break;case"completed":a.getCompleted();break;case"pending":a.getPending()}},a.state={showConfirm:!1,title:"Confirm Order Fulfillment",message:"Please confirm that you want to mark this order as completed, this cant be undone.",isLoading:!0,channels:["neworder","orderstatus","routerequest"],total_count:0,orders:[],agents:[],showOrderStatus:!1,orderStatusAgent:{},showOrderItems:!1,showAgentsToAssign:!1,showAgent:!1,showInvoice:!1,selected_order:{},selected_agent:{},order_type:"all"},a.pubnub.init(Object(p.a)(a)),a.showOrderItems=a.showOrderItems.bind(Object(p.a)(a)),a.handleCloseModal=a.handleCloseModal.bind(Object(p.a)(a)),a.agentSelected=a.agentSelected.bind(Object(p.a)(a)),a.showAgentsToAssign=a.showAgentsToAssign.bind(Object(p.a)(a)),a.removeAgentFromRoute=a.removeAgentFromRoute.bind(Object(p.a)(a)),a.getAgents=a.getAgents.bind(Object(p.a)(a)),a.getOrders=a.getOrders.bind(Object(p.a)(a)),a.getCompleted=a.getCompleted.bind(Object(p.a)(a)),a.getPending=a.getPending.bind(Object(p.a)(a)),a.getCount=a.getCount.bind(Object(p.a)(a)),a.markOrderAsFulfilled=a.markOrderAsFulfilled.bind(Object(p.a)(a)),a.markOrderAsFulfilledWithId=a.markOrderAsFulfilledWithId.bind(Object(p.a)(a)),a.closeOrderStatus=a.closeOrderStatus.bind(Object(p.a)(a)),a.showLoading=a.showLoading.bind(Object(p.a)(a)),a.hideLoading=a.hideLoading.bind(Object(p.a)(a)),a.hideConfirm=a.hideConfirm.bind(Object(p.a)(a)),a.showConfirm=a.showConfirm.bind(Object(p.a)(a)),a.yesClicked=a.yesClicked.bind(Object(p.a)(a)),a.noClicked=a.noClicked.bind(Object(p.a)(a)),a.showAgent=a.showAgent.bind(Object(p.a)(a)),a.hideAgent=a.hideAgent.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"yesClicked",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.hideConfirm(),this.showLoading(),e.next=4,ae(this.state.selected_order._id);case 4:if(t=e.sent,this.hideLoading(),"error"!=t){e.next=8;break}return e.abrupt("return");case 8:t&&t.data&&(this.setState((function(e){var n=e.orders;return n.splice(e.orders.indexOf(e.selected_order),1,t.data),{orders:n,selected_order:{}}})),this.getAgents());case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"noClicked",value:function(){this.hideConfirm()}},{key:"showConfirm",value:function(e){this.setState({selected_order:e,showConfirm:!0})}},{key:"hideConfirm",value:function(){this.setState({showConfirm:!1})}},{key:"markOrderAsFulfilled",value:function(e,t){this.showConfirm(t)}},{key:"markOrderAsFulfilledWithId",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoading(),e.next=3,ae(n);case 3:if(a=e.sent,this.hideLoading(),"error"!=a){e.next=7;break}return e.abrupt("return");case 7:a&&a.data&&(this.setState((function(e){var t=e.orders;return s.props.showMessage("Order has been successfully fulfilled"),t.map((function(s){s._id===n&&t.splice(e.orders.indexOf(s),1,a.data)})),{showOrderStatus:!1,orderStatusAgent:{},orders:t}})),this.getAgents());case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"showLoading",value:function(){this.setState({isLoading:!0})}},{key:"hideLoading",value:function(){this.setState({isLoading:!1})}},{key:"showAgent",value:function(e,t){this.setState({selected_agent:t.agent,showAgent:!0})}},{key:"hideAgent",value:function(){this.setState({showAgent:!1})}},{key:"showOrderItems",value:function(e,t){this.setState({showOrderItems:!0,selected_order:t}),e.preventDefault()}},{key:"showAgentsToAssign",value:function(e,t){this.setState({showAgentsToAssign:!0,selected_order:t}),e.preventDefault()}},{key:"agentSelected",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.showLoading(),e.next=4,s=n._id,r=this.state.selected_order._id,Q("/orders/assign_agent",{agent_id:s,order_id:r}).then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 4:if(a=e.sent,this.hideLoading(),"error"!=a){e.next=8;break}return e.abrupt("return");case 8:a&&a.data&&(this.getAgents(),this.props.showMessage("Request to fulfill order has been sent to agent"));case 9:case"end":return e.stop()}var s,r}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeAgentFromRoute",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.showLoading(),e.next=4,s=n._id,r=this.state.selected_order._id,Q("/orders/remove_agent",{agent_id:s,order_id:r}).then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 4:if(a=e.sent,this.hideLoading(),"error"!=a){e.next=8;break}return e.abrupt("return");case 8:a&&a.data&&(this.getAgents(),this.props.showMessage("Agent was successfully unassigned from order"));case 9:case"end":return e.stop()}var s,r}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAgents",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if("error"!=(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:t&&t.data&&this.setState({agents:t.data});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showInvoice",value:function(e){this.setState({showInvoice:!0,selected_order:e})}},{key:"handleCloseModal",value:function(){this.setState({showOrderItems:!1,showAgentsToAssign:!1,showInvoice:!1})}},{key:"closeOrderStatus",value:function(){this.setState({showOrderStatus:!1,orderStatusAgent:{}})}},{key:"getOrders",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoading(),e.next=3,n="all"===this.state.order_type?this.state.orders.length:0,Q("/orders",{count:n}).then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 3:if(t=e.sent,this.hideLoading(),"error"!=t){e.next=8;break}return this.setState({order_type:"all"}),e.abrupt("return");case 8:t&&t.data&&this.setState((function(e){return e.orders.length>0&&"all"===e.order_type?{selected_order:{},orders:e.orders.concat(t.data),order_type:"all"}:{selected_order:{},orders:t.data,order_type:"all"}})),this.getCount();case 10:case"end":return e.stop()}var n}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCompleted",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoading(),e.next=3,n="completed"===this.state.order_type?this.state.orders.length:0,Q("/orders/completed",{count:n}).then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 3:if(t=e.sent,this.hideLoading(),"error"!=t){e.next=8;break}return this.setState({order_type:"completed"}),e.abrupt("return");case 8:t&&t.data&&this.setState((function(e){return e.orders.length>0&&"completed"===e.order_type?{selected_order:{},orders:e.orders.concat(t.data),order_type:"completed"}:{selected_order:{},orders:t.data,order_type:"completed"}})),this.getCount();case 10:case"end":return e.stop()}var n}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPending",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoading(),e.next=3,n="pending"===this.state.order_type?this.state.orders.length:0,Q("/orders/pending",{count:n}).then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 3:if(t=e.sent,this.hideLoading(),"error"!=t){e.next=8;break}return this.setState({order_type:"pending"}),e.abrupt("return");case 8:t&&t.data&&this.setState((function(e){return e.orders.length>0&&"pending"===e.order_type?{selected_order:{},orders:e.orders.concat(t.data),order_type:"pending"}:{selected_order:{},orders:t.data,order_type:"pending"}})),this.getCount();case 10:case"end":return e.stop()}var n}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:if("error"!=(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:t&&t.data&&this.setState({total_count:t.data.count});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;this.getOrders(),this.getAgents(),this.pubnub.subscribe({channels:this.state.channels}),this.pubnub.getMessage("neworder",(function(t){e.getOrders()})),this.pubnub.getMessage("orderstatus",(function(t){var n=t.userMetadata,a=t.message.status;if("completed"===a&&e.setState({showOrderStatus:!0,orderStatusAgent:n}),"abandoned"===a){var s="Agent "+n.firstname+" "+n.lastname+" has abandoned his delivery";e.props.showMessage(s)}}))}},{key:"render",value:function(){var e=this;return Object(_.jsxs)("div",{className:"top-div",children:[Object(_.jsxs)("div",{className:"container",children:[Object(_.jsx)("div",{className:"row",children:Object(_.jsxs)("h5",{className:"text-left",style:je,children:[this.state.total_count," Order(s)"]})}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"bt-item-drink-profit shadow",children:[Object(_.jsx)("button",{className:"laser-inline blue-bg bt-btn",onClick:this.getOrders,style:"all"===this.state.order_type?pe:me,children:"all"}),Object(_.jsx)("button",{className:"laser-inline grey-bg bt-btn",onClick:this.getCompleted,style:"completed"===this.state.order_type?pe:me,children:"completed"}),Object(_.jsx)("button",{className:"laser-inline grey-bg bt-btn",onClick:this.getPending,style:"pending"===this.state.order_type?pe:me,children:"pending"})]}),Object(_.jsx)("br",{})]}),Object(_.jsx)("div",{className:"row",children:this.state.orders.map((function(t){return Object(_.jsx)(k,{showAgent:e.showAgent,order:t,markOrderAsFulfilled:e.markOrderAsFulfilled,showAgentsToAssign:e.showAgentsToAssign,showOrderItems:e.showOrderItems},t._id)}))})]}),this.state.showAgent?Object(_.jsx)(R,{agent:this.state.selected_agent,showViewAgent:this.state.showAgent,hideAgent:this.hideAgent}):"",this.state.showOrderStatus?Object(_.jsx)(K,{agent:this.state.orderStatusAgent,markOrderAsFulfilledWithId:this.markOrderAsFulfilledWithId,closeOrderStatus:this.closeOrderStatus,showOrderStatus:this.state.showOrderStatus}):"",Object(_.jsx)(B,{yesClicked:this.yesClicked,noClicked:this.noClicked,showConfirm:this.state.showConfirm,title:this.state.title,message:this.state.message}),Object(_.jsx)(M,{isLoading:this.state.isLoading}),Object(_.jsx)(G.a,{onBottom:this.handleOnDocumentBottom}),this.state.showAgentsToAssign?Object(_.jsx)(L,{agents:this.state.agents,removeAgentFromRoute:this.removeAgentFromRoute,showAgentsToAssign:this.state.showAgentsToAssign,handleCloseModal:this.handleCloseModal,agentSelected:this.agentSelected}):"",this.state.showOrderItems?Object(_.jsx)(N,{showOrderItems:this.state.showOrderItems,order:this.state.selected_order,handleCloseModal:this.handleCloseModal}):""]})}}]),n}(r.Component),xe=n(14),ve=n.p+"static/media/logo1.81e4b828.png";function _e(e){return Object(_.jsxs)("div",{className:"bt-item",children:[Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-6 col-sm-6",children:Object(_.jsx)("img",{className:"bt-center",id:"image",src:null==e.image?ve:e.image,width:"90",height:"90"})}),Object(_.jsxs)("div",{className:"col-md-6 col-sm-6",children:[Object(_.jsx)("h6",{children:"Add Image with size <= 500 KB"}),Object(_.jsx)("input",{className:"",type:"file",onChange:e.imageChanged}),Object(_.jsx)("button",{className:"laser-inline green-bg bt-btn",onClick:e.uploadImage,children:"Upload Image"})]})]}),Object(_.jsx)("br",{}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"name",children:Object(_.jsx)("h6",{children:"Name"})}),Object(_.jsx)("input",{autoComplete:"off",id:"name",type:"text",name:"name",className:"form-control",value:e.name,onChange:e.onFieldChanged,placeholder:"Name"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"category",children:Object(_.jsx)("h6",{children:"Category"})}),Object(_.jsx)("select",{className:"form-control",id:"category",name:"category",value:e.category,onChange:e.onFieldChanged,children:e.categories.map((function(e){return Object(_.jsx)("option",{children:e.name},e._id)}))})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"unit",children:Object(_.jsx)("h6",{children:"Unit"})}),Object(_.jsxs)("select",{className:"form-control",id:"unit",name:"unit",value:e.unit,onChange:e.onFieldChanged,children:[Object(_.jsx)("option",{children:"bottle"}),Object(_.jsx)("option",{children:"carton"}),Object(_.jsx)("option",{children:"crate"}),Object(_.jsx)("option",{children:"item"})]})]})]}),Object(_.jsx)("br",{}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"price",children:Object(_.jsx)("h6",{children:"Description"})}),Object(_.jsx)("input",{autoComplete:"off",id:"description",type:"text",name:"description",className:"form-control",value:e.description,onChange:e.onFieldChanged,placeholder:"Description"})]}),Object(_.jsxs)("div",{className:"col-md-8 col-sm-8",children:[Object(_.jsx)("label",{htmlFor:"profit",children:Object(_.jsx)("h6",{children:"Content (Ingredient's or recipe's)"})}),Object(_.jsx)("input",{autoComplete:"off",id:"content_string",type:"text",name:"content_string",className:"form-control",value:e.content_string,onChange:e.onFieldChanged,placeholder:"seperate contents with a comma"})]})]}),Object(_.jsx)("br",{}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"price",children:Object(_.jsx)("h6",{children:"Price"})}),Object(_.jsx)("input",{autoComplete:"off",id:"price",type:"number",name:"price",className:"form-control",value:e.price,onChange:e.onFieldChanged,placeholder:"Price"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"profit",children:Object(_.jsx)("h6",{children:"Profit %"})}),Object(_.jsx)("input",{autoComplete:"off",id:"profit",type:"number",name:"profit",className:"form-control",value:e.profit,onChange:e.onFieldChanged,placeholder:"Profit %"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"price",children:Object(_.jsx)("h6",{children:"Price with profit"})}),Object(_.jsx)("div",{className:"bt-item-drink-profit shadow",children:Object(_.jsx)("h5",{children:x(e.profit_price)})})]})]}),Object(_.jsx)("div",{className:"row",children:Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"name",children:Object(_.jsx)("h6",{children:"Stock"})}),Object(_.jsx)("input",{autoComplete:"off",id:"stock",type:"number",name:"stock",className:"form-control",value:e.stock,onChange:e.onFieldChanged,placeholder:"Stock"})]})})]})}var ke=n(66),Ce=n.n(ke),we={bucketName:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AWS_BUCKET,dirName:"drinkimages",region:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AWS_REGION,accessKeyId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AWS_KEY,secretAccessKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AWS_SECRET},ye={marginLeft:"16px",marginRight:"8px"},Ne={marginLeft:"8px",marginRight:"16px"};w.a.setAppElement("#main");var Ae=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={name:"",category:"",unit:"bottle",price:0,profit_price:0,profit:0,error:"",stock:0,image_uploaded:!1,image:null,file:null,description:"",content_string:"",content:[]},a.onFieldChanged=a.onFieldChanged.bind(Object(p.a)(a)),a.imageChanged=a.imageChanged.bind(Object(p.a)(a)),a.uploadImage=a.uploadImage.bind(Object(p.a)(a)),a.createDrink=a.createDrink.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"createDrink",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({error:""}),!(this.state.name.length<=0||this.state.name.length>100)){e.next=4;break}return this.setState({error:"Please complete all fields"}),e.abrupt("return");case 4:if(!(this.state.price<=0||this.state.profit<=0)){e.next=7;break}return this.setState({error:"Please complete all fields"}),e.abrupt("return");case 7:return t=[],this.state.content_string.length>0&&(this.state.content_string.includes(",")?t=this.state.content_string.split(","):t.push(this.state.content_string)),n={name:this.state.name,category:this.state.category.length<=0?this.props.categories[0].name:this.state.category,unit:this.state.unit,price:this.state.profit_price,profit:this.state.profit,image:this.state.image,stock:this.state.stock,description:this.state.description,content:t},this.props.showLoading(),e.next=13,re(n);case 13:if(a=e.sent,this.props.hideLoading(),"error"!==a){e.next=18;break}return this.setState({error:"Your drink could not be added at the moment. try again later"}),e.abrupt("return");case 18:a.data&&"created"===a.data.response?(this.setState({name:"",category:"Special Packages",unit:"bottle",price:0,profit_price:0,image_uploaded:!1,stock:0,profit:0,image:null,file:null,description:"",content_string:"",content:[]}),this.props.reloadDrinks()):this.setState({error:"Your drink could not be added at the moment. try again later"});case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.props.categories.length&&this.setState({category:this.props.categories[0].name})}},{key:"imageChanged",value:function(e){var t=e.target.files[0];if(t){if(!t.name.match(/\.(png|jpg|jpeg|gif|svg)$/))return void this.setState({error:"File is not a Zip File"});if(t.size>512e3)return void this.setState({error:"File is too large"});this.setState({file:t,image:URL.createObjectURL(t)})}}},{key:"uploadImage",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=this.state.file&&((new FormData).append("image",this.state.file,this.state.file.name),this.props.showLoading(),Ce.a.uploadFile(this.state.file,we).then((function(e){console.log(e)})).catch((function(e){console.error(e),t.setState({error:"An error occurred uploading the image. Please check the network"})})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onFieldChanged",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;if("price"===a){if(n>0)var s=parseInt(n)+this.state.profit/100*parseInt(n);this.setState({price:n,profit_price:s})}else if("profit"===a){s=parseInt(this.state.price)+n/100*parseInt(this.state.price);this.setState({profit_price:s,profit:n})}else this.setState(Object(xe.a)({},a,n))}},{key:"render",value:function(){return Object(_.jsx)("div",{children:Object(_.jsxs)(w.a,{isOpen:this.props.showAddDrink,className:"DrinkModal",overlayClassName:"Overlay",contentLabel:"Minimal Modal Example",children:[Object(_.jsx)("h4",{className:"text-center",children:"Add Drink"}),Object(_.jsx)("br",{}),Object(_.jsx)("h5",{className:"bt-red-text",children:this.state.error?this.state.error:""}),Object(_.jsx)("br",{}),this.state.image_uploaded?Object(_.jsx)("h5",{className:"bt-green-text",children:"Image Successfully Uploaded"}):"",Object(_.jsx)(_e,{content:this.state.content,description:this.state.description,content_string:this.state.content_string,uploadImage:this.uploadImage,categories:this.props.categories,imageChanged:this.imageChanged,onFieldChanged:this.onFieldChanged,file:this.state.file,name:this.state.name,profit:this.state.profit,profit_price:this.state.profit_price,price:this.state.price,category:this.state.category,unit:this.state.unit,image:this.state.image,stock:this.state.stock}),Object(_.jsx)("button",{className:"laser-inline green-bg bt-btn bt-inline",style:ye,onClick:this.createDrink,children:"save"}),Object(_.jsx)("button",{className:"laser-inline grey-bg bt-btn bt-inline",style:Ne,onClick:this.props.handleCloseModal,children:"cancel"})]})})}}]),n}(r.Component),Se={marginLeft:"16px",marginRight:"8px"},Le={marginLeft:"8px",marginRight:"16px"};w.a.setAppElement("#main");var Fe=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={name:"",category:"",unit:"bottle",price:0,profit:0,profit_price:0,image:null,description:"",content:[],content_string:"",stock:0,file:null},a.onFieldChanged=a.onFieldChanged.bind(Object(p.a)(a)),a.imageChanged=a.imageChanged.bind(Object(p.a)(a)),a.uploadImage=a.uploadImage.bind(Object(p.a)(a)),a.editDrink=a.editDrink.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e,t,n="";this.props.drink.content.length>0&&this.props.drink.content.map((function(e){n+=e+","})),this.setState(Object(xe.a)({name:this.props.drink.name,category:this.props.drink.category,unit:this.props.drink.unit,profit:this.props.drink.profit,price:(e=this.props.drink.price,t=this.props.drink.profit,Math.round(e/(1+t/100))),profit_price:this.props.drink.price,image:this.props.drink.image,stock:this.props.drink.stock,content:this.props.drink.content,content_string:n,description:this.props.drink.description,file:null},"category",this.props.categories[0].name))}},{key:"editDrink",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({error:""}),!(this.state.name.length<=0||this.state.name.length>100)){e.next=4;break}return this.setState({error:"Please complete all fields"}),e.abrupt("return");case 4:if(!(this.state.price<=0||this.state.profit<=0)){e.next=7;break}return this.setState({error:"Please complete all fields"}),e.abrupt("return");case 7:return t=[],this.state.content_string.length>0&&(this.state.content_string.includes(",")?t=this.state.content_string.split(","):t.push(this.state.content_string)),n={_id:this.props.drink._id,name:this.state.name,category:this.state.category,unit:this.state.unit,profit:this.state.profit,price:this.state.profit_price,image:this.state.image,stock:this.state.stock,description:this.state.description,content:t},e.next=12,ie(n);case 12:if("error"!==(a=e.sent)){e.next=16;break}return this.setState({error:"The drink could not be edited at the moment. try again later"}),e.abrupt("return");case 16:a.data&&"edited"===a.data.response?(this.setState({name:"",category:"",unit:"",price:0,profit_price:0,profit:0,stock:0,image:null,file:null,description:"",content_string:"",content:[]}),this.props.reloadDrinks()):this.setState({error:"An error occurred updating the drink. Please check the network"});case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"imageChanged",value:function(e){var t=e.target.files[0];if(t){if(!t.name.match(/\.(png|jpg|jpeg|gif|svg)$/))return void this.setState({error:"File is not a Zip File"});if(t.size>512e3)return void this.setState({error:"File is too large"});this.setState({file:t,image:URL.createObjectURL(t)})}}},{key:"uploadImage",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.state.file){e.next=12;break}return(t=new FormData).append("image",this.state.file,this.state.file.name),this.props.showLoading(),e.next=6,Q("/uploads/drinkimage",t).then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 6:if(n=e.sent,this.props.hideLoading(),"error"!=n){e.next=11;break}return this.setState({error:"An error occurred uploading the image. Please check the network"}),e.abrupt("return");case 11:n&&n.data&&n.data.response?this.setState({image:n.data.response}):this.setState({error:"An error occurred uploading the image. Please check the network"});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onFieldChanged",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;if("price"===a){if(n>0)var s=parseInt(n)+this.state.profit/100*parseInt(n);this.setState({price:n,profit_price:s})}else if("profit"===a){s=parseInt(this.state.price)+n/100*parseInt(this.state.price);this.setState({profit_price:s,profit:n})}else this.setState(Object(xe.a)({},a,n))}},{key:"render",value:function(){return Object(_.jsx)("div",{children:Object(_.jsxs)(w.a,{isOpen:this.props.showEditDrink,className:"DrinkModal",overlayClassName:"Overlay",contentLabel:"Minimal Modal Example",children:[Object(_.jsx)("h4",{className:"text-center",children:"Edit Drink"}),Object(_.jsx)("br",{}),Object(_.jsx)("h5",{className:"bt-red-text",children:this.state.error?this.state.error:""}),Object(_.jsx)("br",{}),Object(_.jsx)(_e,{content:this.state.content,description:this.state.description,content_string:this.state.content_string,uploadImage:this.uploadImage,categories:this.props.categories,imageChanged:this.imageChanged,onFieldChanged:this.onFieldChanged,file:this.state.file,name:this.state.name,profit:this.state.profit,price:this.state.price,profit_price:this.state.profit_price,category:this.state.category,unit:this.state.unit,image:this.state.image,stock:this.state.stock}),Object(_.jsx)("button",{className:"laser-inline green-bg bt-btn",style:Se,onClick:this.editDrink,children:"save"}),Object(_.jsx)("button",{className:"laser-inline grey-bg bt-btn",style:Le,onClick:this.props.handleCloseModal,children:"cancel"})]})})}}]),n}(r.Component);function De(e){return Object(_.jsx)("div",{className:"col-md-6 col-sm-6",children:Object(_.jsxs)("div",{className:"shadow bt-item",children:[Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-4 col-sm-4",children:Object(_.jsx)("img",{className:"bt-center",id:"image",src:null!=e.drink.image&&e.drink.image.length>0?e.drink.image:ve,width:"60",height:"60"})}),Object(_.jsxs)("div",{className:"col-md-5 col-sm-5",children:[Object(_.jsx)("h4",{children:e.drink.name}),Object(_.jsx)("br",{}),Object(_.jsx)("h5",{children:e.drink.category})]}),Object(_.jsxs)("div",{className:"col-md-3 col-sm-3",children:[Object(_.jsxs)("h5",{children:[x(e.drink.price)," per ",e.drink.unit]}),Object(_.jsx)("br",{}),Object(_.jsxs)("h5",{children:["Stock - ",e.drink.stock]})]})]}),Object(_.jsx)("div",{className:"row",children:e.drink.content?Object(_.jsxs)("div",{className:"col-md-12 col-sm-12",children:[Object(_.jsxs)("h6",{children:["Description - ",e.drink.description]}),Object(_.jsx)("br",{}),Object(_.jsx)("h6",{className:"bt-inline",children:"Content - "}),e.drink.content.map((function(e){return Object(_.jsxs)("h6",{className:"bt-inline",children:[e,","]})}))]}):""}),Object(_.jsx)("div",{className:"row",children:Object(_.jsxs)("div",{className:"col-md-6 col-sm-6",children:[Object(_.jsx)("button",{onClick:function(t){return e.editClicked(t,e.drink)},className:"shadow blue-bg bt-btn bt-inline",children:"edit"}),Object(_.jsx)("br",{}),Object(_.jsx)("button",{onClick:function(t){return e.deleteDrink(t,e.drink)},className:"shadow red-bg bt-btn bt-inline",children:"delete"})]})})]})})}var Ee={float:"left"},Me={float:"right",marginTop:"-0.01px"},Pe=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={showConfirm:!1,title:"Confirm Delete",message:"Are you sure you want to delete the selected drink item ?",isLoading:!0,showAddDrink:!1,showEditDrink:!1,categories:[],drinks:[],selected_drink:{}},a.handleCloseModal=a.handleCloseModal.bind(Object(p.a)(a)),a.reloadDrinks=a.reloadDrinks.bind(Object(p.a)(a)),a.showAddDrink=a.showAddDrink.bind(Object(p.a)(a)),a.showEditDrink=a.showEditDrink.bind(Object(p.a)(a)),a.deleteDrink=a.deleteDrink.bind(Object(p.a)(a)),a.showLoading=a.showLoading.bind(Object(p.a)(a)),a.hideLoading=a.hideLoading.bind(Object(p.a)(a)),a.hideConfirm=a.hideConfirm.bind(Object(p.a)(a)),a.showConfirm=a.showConfirm.bind(Object(p.a)(a)),a.yesClicked=a.yesClicked.bind(Object(p.a)(a)),a.noClicked=a.noClicked.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"yesClicked",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.hideConfirm(),this.showLoading(),e.next=4,n=this.state.selected_drink._id,Q("/drinks/delete",{id:n}).then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 4:if(t=e.sent,this.hideLoading(),"error"!=t){e.next=8;break}return e.abrupt("return");case 8:t&&t.data&&this.reloadDrinks();case 9:case"end":return e.stop()}var n}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"noClicked",value:function(){this.hideConfirm()}},{key:"showConfirm",value:function(){this.setState({showConfirm:!0})}},{key:"hideConfirm",value:function(){this.setState({showConfirm:!1})}},{key:"showLoading",value:function(){this.setState({isLoading:!0})}},{key:"hideLoading",value:function(){this.setState({isLoading:!1})}},{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoading(),e.next=3,ce();case 3:if("error"!=(t=e.sent)){e.next=6;break}return e.abrupt("return");case 6:return t&&t.data&&this.setState({categories:t.data}),e.next=9,se();case 9:if(n=e.sent,this.hideLoading(),"error"!=n){e.next=13;break}return e.abrupt("return");case 13:n&&n.data&&this.setState({drinks:n.data});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadDrinks",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handleCloseModal(),this.showLoading(),e.next=4,se();case 4:if(t=e.sent,this.hideLoading(),"error"!=t){e.next=8;break}return e.abrupt("return");case 8:t&&t.data&&this.setState({drinks:t.data});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleCloseModal",value:function(){this.setState({showAddDrink:!1,showEditDrink:!1})}},{key:"showAddDrink",value:function(){this.setState({showAddDrink:!0})}},{key:"showEditDrink",value:function(e,t){this.setState({showEditDrink:!0,selected_drink:t}),e.preventDefault()}},{key:"deleteDrink",value:function(e,t){e.preventDefault(),this.setState({selected_drink:t}),this.showConfirm()}},{key:"render",value:function(){var e=this;return Object(_.jsxs)("div",{className:"top-div",children:[Object(_.jsxs)("div",{className:"container",children:[Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("h5",{className:"text-left",style:Ee,children:[this.state.drinks.length," Drinks"]}),Object(_.jsxs)("button",{onClick:this.showAddDrink,className:"green-bg bt-btn",style:Me,children:[" ",Object(_.jsx)("i",{className:"fas fa-plus white-text"})," Add Drink"]})]}),Object(_.jsx)("div",{className:"row",children:this.state.drinks.map((function(t){return Object(_.jsx)(De,{editClicked:e.showEditDrink,deleteDrink:e.deleteDrink,drink:t},t._id)}))})]}),Object(_.jsx)(M,{isLoading:this.state.isLoading}),Object(_.jsx)(B,{yesClicked:this.yesClicked,noClicked:this.noClicked,showConfirm:this.state.showConfirm,title:this.state.title,message:this.state.message}),this.state.showAddDrink?Object(_.jsx)(Ae,{showLoading:this.showLoading,hideLoading:this.hideLoading,categories:this.state.categories,handleCloseModal:this.handleCloseModal,showAddDrink:this.state.showAddDrink,reloadDrinks:this.reloadDrinks}):"",this.state.showEditDrink?Object(_.jsx)(Fe,{showLoading:this.showLoading,hideLoading:this.hideLoading,drink:this.state.selected_drink,categories:this.state.categories,handleCloseModal:this.handleCloseModal,showEditDrink:this.state.showEditDrink,reloadDrinks:this.reloadDrinks}):""]})}}]),n}(r.Component),Ie={marginRight:"8px"},Re={marginLeft:"8px",marginRight:"16px"};w.a.setAppElement("#main");var Te=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={name:""},a.onFieldChanged=a.onFieldChanged.bind(Object(p.a)(a)),a.createCategory=a.createCategory.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"createCategory",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.name.length<=0&&this.state.name.length>100)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n=this.state.name,Q("/categories/create",{name:n}).then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 4:if("error"!==(t=e.sent)){e.next=7;break}return e.abrupt("return");case 7:t.data&&"created"===t.data.response&&(this.setState({name:""}),this.props.reloadCategories());case 8:case"end":return e.stop()}var n}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onFieldChanged",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(xe.a)({},a,n))}},{key:"render",value:function(){return Object(_.jsxs)(w.a,{isOpen:this.props.showAddCategory,className:"CategoryModal",overlayClassName:"Overlay",contentLabel:"Minimal Modal Example",children:[Object(_.jsx)("h4",{className:"text-center",children:"Add Category"}),Object(_.jsxs)("div",{className:"bt-item",children:[Object(_.jsx)("label",{htmlFor:"unit",children:Object(_.jsx)("h6",{children:"Name"})}),Object(_.jsx)("input",{autoComplete:"off",id:"name",type:"text",name:"name",className:"form-control",value:this.state.name,onChange:this.onFieldChanged,placeholder:"Name"}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)("button",{className:"laser-inline green-bg bt-btn",style:Ie,onClick:this.createCategory,children:"save"}),Object(_.jsx)("button",{className:"laser-inline grey-bg bt-btn",style:Re,onClick:this.props.handleCloseModal,children:"cancel"})]})]})}}]),n}(r.Component),Ue={marginRight:"8px"},Be={marginLeft:"8px",marginRight:"16px"};w.a.setAppElement("#main");var Ve=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={name:""},a.editCategory=a.editCategory.bind(Object(p.a)(a)),a.onFieldChanged=a.onFieldChanged.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"editCategory",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.name.length<=0&&this.state.name.length>100)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n=this.props.category._id,a=this.state.name,Q("/categories/edit",{id:n,name:a}).then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 4:if("error"!==(t=e.sent)){e.next=7;break}return e.abrupt("return");case 7:t.data&&"success"===t.data.response&&(this.setState({name:""}),this.props.reloadCategories());case 8:case"end":return e.stop()}var n,a}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onFieldChanged",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(xe.a)({},a,n))}},{key:"render",value:function(){return Object(_.jsxs)(w.a,{isOpen:this.props.showEditCategory,className:"EditCategoryModal",overlayClassName:"Overlay",contentLabel:"Minimal Modal Example",children:[Object(_.jsx)("h4",{className:"text-center",children:"Edit Category"}),Object(_.jsxs)("div",{className:"bt-item",children:[Object(_.jsx)("h4",{children:this.props.category.name}),Object(_.jsx)("br",{}),Object(_.jsx)("label",{htmlFor:"unit",children:Object(_.jsx)("h6",{children:"New Name"})}),Object(_.jsx)("input",{autoComplete:"off",id:"name",type:"text",name:"name",className:"form-control",value:this.state.name,onChange:this.onFieldChanged,placeholder:this.props.category.name}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)("button",{className:"laser-inline green-bg bt-btn",style:Ue,onClick:this.editCategory,children:"save"}),Object(_.jsx)("button",{className:"laser-inline grey-bg bt-btn",style:Be,onClick:this.props.handleCloseModal,children:"cancel"})]})]})}}]),n}(r.Component),We={marginLeft:"8px",marginRight:"8px"},Ke={marginLeft:"8px",marginRight:"8px"};function Ge(e){return Object(_.jsx)("div",{className:"col-md-4 col-sm-4",children:Object(_.jsx)("div",{className:"bt-item shadow",children:Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-5 col-sm-5",children:Object(_.jsx)("h4",{children:e.category.name})}),Object(_.jsx)("div",{className:"col-md-3 col-sm-3",children:Object(_.jsxs)("h5",{children:[e.category.drinks_count," Drinks"]})}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("button",{className:"laser-inline blue-bg bt-btn",onClick:function(t){return e.editClicked(t,e.category)},style:We,children:"edit"}),Object(_.jsx)("button",{className:"laser-inline red-bg bt-btn",style:Ke,children:"delete"})]})]})})})}var He={float:"left"},ze={float:"right",marginTop:"-0.01px"},qe=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={showAddCategory:!1,showEditCategory:!1,categories:[],selected_category:{}},a.handleCloseModal=a.handleCloseModal.bind(Object(p.a)(a)),a.reloadCategories=a.reloadCategories.bind(Object(p.a)(a)),a.showAddCategory=a.showAddCategory.bind(Object(p.a)(a)),a.editClicked=a.editClicked.bind(Object(p.a)(a)),a.onFieldChanged=a.onFieldChanged.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:if("error"!=(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:t&&t.data&&this.setState({categories:t.data});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleCloseModal",value:function(){this.setState({showAddCategory:!1,showEditCategory:!1,selected_category:{}})}},{key:"reloadCategories",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handleCloseModal(),e.next=3,ce();case 3:if("error"!=(t=e.sent)){e.next=6;break}return e.abrupt("return");case 6:t&&t.data&&this.setState({categories:t.data});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onFieldChanged",value:function(e){var t=e.target.value;this.setState({selected_category:t})}},{key:"editClicked",value:function(e,t){this.setState({showEditCategory:!0,selected_category:t}),e.preventDefault()}},{key:"showAddCategory",value:function(){this.setState({showAddCategory:!0})}},{key:"render",value:function(){var e=this;return Object(_.jsxs)("div",{className:"top-div",children:[Object(_.jsxs)("div",{className:"container",children:[Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("h5",{className:"text-center",style:He,children:[this.state.categories.length," Categories"]}),Object(_.jsxs)("button",{onClick:this.showAddCategory,className:"green-bg bt-btn",style:ze,children:[" ",Object(_.jsx)("i",{className:"fas fa-plus white-text"})," Add Category"]})]}),Object(_.jsx)("div",{className:"row",children:this.state.categories.map((function(t){return Object(_.jsx)(Ge,{category:t,editClicked:e.editClicked},t._id)}))})]}),Object(_.jsx)(Te,{handleCloseModal:this.handleCloseModal,showAddCategory:this.state.showAddCategory,reloadCategories:this.reloadCategories}),Object(_.jsx)(Ve,{category:this.state.selected_category,handleCloseModal:this.handleCloseModal,showEditCategory:this.state.showEditCategory,onFieldChanged:this.onFieldChanged,reloadCategories:this.reloadCategories})]})}}]),n}(r.Component);function $e(e){return Object(_.jsx)("div",{className:"col-md-6 col-sm-6",children:Object(_.jsx)("div",{className:"bt-item-user shadow",children:Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Name"})}),Object(_.jsx)("h4",{className:"bt-blue-text",children:e.user.firstname}),Object(_.jsx)("h4",{className:"bt-blue-text",children:e.user.lastname}),Object(_.jsx)("br",{}),Object(_.jsxs)("h5",{children:["Orders - ",e.user.orders.length]})]}),Object(_.jsxs)("div",{className:"col-md-3 col-sm-3",children:[Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Date of Birth"})}),Object(_.jsx)("h6",{children:e.user.age}),Object(_.jsx)("br",{}),Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Phone Number"})}),Object(_.jsx)("h6",{children:e.user.phone_number}),Object(_.jsx)("br",{}),Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Created"})}),Object(_.jsx)("h6",{children:O(e.user.created)})]}),Object(_.jsxs)("div",{className:"col-md-5 col-sm-5",children:[Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Delivery Address"})}),Object(_.jsx)("h6",{children:e.user.delivery_address}),Object(_.jsx)("br",{}),Object(_.jsx)("h5",{children:Object(_.jsx)("b",{children:"Email"})}),Object(_.jsx)("h6",{children:e.user.email}),Object(_.jsx)("br",{})]})]})})})}var Ze={float:"left"},Je=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).handleOnDocumentBottom=function(){a.getUsers()},a.state={isLoading:!0,total_count:0,users:[]},a.getUsers=a.getUsers.bind(Object(p.a)(a)),a.countUsers=a.countUsers.bind(Object(p.a)(a)),a.handleOnDocumentBottom=a.handleOnDocumentBottom.bind(Object(p.a)(a)),a.showLoading=a.showLoading.bind(Object(p.a)(a)),a.hideLoading=a.hideLoading.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"showLoading",value:function(){this.setState({isLoading:!0})}},{key:"hideLoading",value:function(){this.setState({isLoading:!1})}},{key:"getUsers",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoading(),e.next=3,n=this.state.users.length,Q("/users",{count:n}).then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 3:if(t=e.sent,this.hideLoading(),"error"!=t){e.next=7;break}return e.abrupt("return");case 7:t&&t.data&&this.setState((function(e){return e.users.length>0?{users:e.users.concat(t.data)}:{users:t.data}}));case 8:case"end":return e.stop()}var n}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"countUsers",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(this.state.users.length);case 2:if("error"!=(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:t&&t.data&&this.setState({total_count:t.data.count});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getUsers(),this.countUsers()}},{key:"render",value:function(){return Object(_.jsxs)("div",{className:"top-div",children:[Object(_.jsxs)("div",{className:"container",children:[Object(_.jsx)("div",{className:"row",children:Object(_.jsxs)("h5",{className:"text-left",style:Ze,children:[this.state.total_count," User(s)"]})}),Object(_.jsx)("div",{className:"row",children:this.state.users.map((function(e){return Object(_.jsx)($e,{user:e},e._id)}))})]}),Object(_.jsx)(M,{isLoading:this.state.isLoading}),Object(_.jsx)(G.a,{onBottom:this.handleOnDocumentBottom})]})}}]),n}(r.Component),Ye=n.p+"static/media/categories.e2f6af67.png",Qe=n.p+"static/media/drinks.9e7fdc6a.png",Xe=n.p+"static/media/order.0f475bfc.png",et=n.p+"static/media/user.61af8cf2.png",tt=n.p+"static/media/agent.71d730fd.png",nt=n.p+"static/media/promo.dcd16939.png",at=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={orders_count:0,drinks_count:0,categories_count:0,agents_count:0,users_count:0,promocodes_count:0,finance:0},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,s,r,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:if("error"!=(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:return t&&t.data&&this.setState({finance:t.data}),e.next=8,ne();case 8:if("error"!=(n=e.sent)){e.next=11;break}return e.abrupt("return");case 11:return n&&n.data&&this.setState({orders_count:n.data.count}),e.next=14,Q("/agents/count").then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 14:if("error"!=(a=e.sent)){e.next=17;break}return e.abrupt("return");case 17:return a&&a.data&&this.setState({agents_count:a.data.count}),e.next=20,Q("/categories/count").then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 20:if("error"!=(s=e.sent)){e.next=23;break}return e.abrupt("return");case 23:return s&&s.data&&this.setState({categories_count:s.data.count}),e.next=26,Q("/drinks/count").then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 26:if("error"!=(r=e.sent)){e.next=29;break}return e.abrupt("return");case 29:return r&&r.data&&this.setState({drinks_count:r.data.count}),e.next=32,be();case 32:if("error"!=(i=e.sent)){e.next=35;break}return e.abrupt("return");case 35:return i&&i.data&&this.setState({users_count:i.data.count}),e.next=38,ue();case 38:if("error"!=(c=e.sent)){e.next=41;break}return e.abrupt("return");case 41:c&&c.data&&this.setState({promocodes_count:c.data.count});case 42:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(_.jsx)("div",{className:"top-div",children:Object(_.jsxs)("div",{className:"container",children:[Object(_.jsx)("div",{className:"bt-item-drink-profit shadow",children:Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-3 col-sm-3 col-xs-6",children:Object(_.jsxs)("h5",{children:["Total Revenue - ",x(this.state.finance.revenue)]})}),Object(_.jsx)("div",{className:"col-md-3 col-sm-3 col-xs-6",children:Object(_.jsxs)("h5",{children:["Total Profit - ",x(this.state.finance.profit)]})}),Object(_.jsx)("div",{className:"col-md-3 col-sm-3 col-xs-6",children:Object(_.jsxs)("h5",{children:["Total Tax - ",x(this.state.finance.tax)]})}),Object(_.jsx)("div",{className:"col-md-3 col-sm-3 col-xs-6",children:Object(_.jsxs)("h5",{children:["Total Expennses - ",x(this.state.finance.expenses)]})}),Object(_.jsx)("div",{className:"col-md-6 col-sm-6 col-xs-6",children:Object(_.jsx)(u.b,{to:"/app/financials",className:"nav-link link blue-text text-left",children:Object(_.jsx)("h5",{children:"View Break Down"})})})]})}),Object(_.jsx)("br",{}),Object(_.jsx)("div",{className:"bt-item shadow",children:Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-4",children:Object(_.jsx)(u.b,{to:"/app/orders",className:"nav-link white-text link",children:Object(_.jsxs)("div",{className:"bt-home-item green-bg shadow",children:[Object(_.jsx)("img",{src:Xe,width:"50",height:"50"}),Object(_.jsx)("h4",{className:"text-right",children:this.state.orders_count}),Object(_.jsx)("h4",{className:"text-center",children:"Orders"})]})})}),Object(_.jsx)("div",{className:"col-md-4",children:Object(_.jsx)(u.b,{to:"/app/drinks",className:"nav-link white-text link",children:Object(_.jsxs)("div",{className:"bt-home-item blue-bg shadow",children:[Object(_.jsx)("img",{src:Qe,width:"50",height:"50"}),Object(_.jsx)("h4",{className:"text-right",children:this.state.drinks_count}),Object(_.jsx)("h4",{className:"text-center",children:"Drinks"})]})})}),Object(_.jsx)("div",{className:"col-md-4",children:Object(_.jsx)(u.b,{to:"/app/categories",className:"nav-link white-text link",children:Object(_.jsxs)("div",{className:"bt-home-item yellow-bg shadow",children:[Object(_.jsx)("img",{src:Ye,width:"50",height:"50"}),Object(_.jsx)("h4",{className:"text-right",children:this.state.categories_count}),Object(_.jsx)("h4",{className:"text-center",children:"Categories"})]})})}),Object(_.jsx)("div",{className:"col-md-4",children:Object(_.jsx)(u.b,{to:"/app/agents",className:"nav-link white-text link",children:Object(_.jsxs)("div",{className:"bt-home-item red-bg shadow",children:[Object(_.jsx)("img",{src:tt,width:"50",height:"50"}),Object(_.jsx)("h4",{className:"text-right",children:this.state.agents_count}),Object(_.jsx)("h4",{className:"text-center",children:"Agents"})]})})}),Object(_.jsx)("div",{className:"col-md-4",children:Object(_.jsx)(u.b,{to:"/app/users",className:"nav-link white-text link",children:Object(_.jsxs)("div",{className:"bt-home-item purple-bg shadow",children:[Object(_.jsx)("img",{src:et,width:"50",height:"50"}),Object(_.jsx)("h4",{className:"text-right",children:this.state.users_count}),Object(_.jsx)("h4",{className:"text-center",children:"Users"})]})})}),Object(_.jsx)("div",{className:"col-md-4",children:Object(_.jsx)(u.b,{to:"/app/promocodes",className:"nav-link white-text link",children:Object(_.jsxs)("div",{className:"bt-home-item black-bg shadow",children:[Object(_.jsx)("img",{src:nt,width:"50",height:"50"}),Object(_.jsx)("h4",{className:"text-right",children:this.state.promocodes_count}),Object(_.jsx)("h4",{className:"text-center",children:"Promocodes"})]})})})]})})]})})}}]),n}(r.Component);function st(e){return Object(_.jsx)("div",{className:"col-md-4 col-sm-4",children:Object(_.jsx)("div",{className:"shadow bt-item",children:Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-3 col-sm-3",children:Object(_.jsx)("img",{className:"bt-center",id:"image",src:null!=e.agent.avatar&&e.agent.avatar.length>0?e.agent.avatar:P,width:"60",height:"60"})}),Object(_.jsxs)("div",{className:"col-md-5 col-sm-5",children:[Object(_.jsxs)("h4",{children:[e.agent.firstname," ",e.agent.lastname]}),Object(_.jsx)("br",{}),Object(_.jsx)("h5",{children:e.agent.phone_number})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("button",{onClick:function(t){return e.editClicked(t,e.agent)},className:"shadow blue-bg bt-btn",children:"edit"}),Object(_.jsx)("br",{}),Object(_.jsx)("button",{onClick:function(t){return e.deleteAgent(t,e.agent)},className:"shadow red-bg bt-btn",children:"delete"})]})]})})})}var rt=n.p+"static/media/id_grey.677af525.png",it="Add Image with size <= 500 KB";function ct(e){return Object(_.jsxs)("div",{className:"bt-item-no-margin",children:[Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("h5",{className:"text-center",children:Object(_.jsx)("b",{children:"Add Agents Avatar"})}),Object(_.jsx)("div",{className:"col-md-6 col-sm-6",children:Object(_.jsx)("img",{className:"bt-center",id:"image",src:null==e.avatar?P:e.avatar,width:"90",height:"90"})}),Object(_.jsxs)("div",{className:"col-md-6 col-sm-6",children:[Object(_.jsx)("h6",{children:it}),Object(_.jsx)("input",{className:"",type:"file",onChange:e.imageChanged}),Object(_.jsx)("button",{className:"laser-inline green-bg bt-btn",onClick:e.uploadImage,children:"Upload Image"})]})]}),Object(_.jsx)("hr",{}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("h5",{className:"text-center",children:Object(_.jsx)("b",{children:"Add Identification"})}),Object(_.jsx)("div",{className:"col-md-3 col-sm-3",children:Object(_.jsx)("img",{className:"bt-center",id:"image",src:null==e.verification_image?rt:e.verification_image,width:"60",height:"60"})}),Object(_.jsxs)("div",{className:"col-md-5 col-sm-5",children:[Object(_.jsx)("h6",{children:it}),Object(_.jsx)("input",{className:"",type:"file",onChange:e.verificationChanged}),Object(_.jsx)("button",{className:"laser-inline green-bg bt-btn",onClick:e.uploadVerification,children:"Upload Verification"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"verification_type",children:Object(_.jsx)("h5",{children:"Verification Type"})}),Object(_.jsxs)("select",{className:"form-control",id:"verification_type",name:"verification_type",value:e.verification_type,onChange:e.onFieldChanged,children:[Object(_.jsx)("option",{children:"National Id Card"}),Object(_.jsx)("option",{children:"Drivers License"}),Object(_.jsx)("option",{children:"Passport"})]})]})]}),Object(_.jsx)("hr",{}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"name",children:Object(_.jsx)("h6",{children:"FirstName"})}),Object(_.jsx)("input",{autoComplete:"off",id:"firstname",type:"text",name:"firstname",className:"form-control",value:e.firstname,onChange:e.onFieldChanged,placeholder:"FirstName"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"category",children:Object(_.jsx)("h6",{children:"LastName"})}),Object(_.jsx)("input",{autoComplete:"off",id:"lastname",type:"text",name:"lastname",className:"form-control",value:e.lastname,onChange:e.onFieldChanged,placeholder:"LastName"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"category",children:Object(_.jsx)("h6",{children:"Email"})}),Object(_.jsx)("input",{autoComplete:"off",id:"email",type:"text",name:"email",className:"form-control",value:e.email,onChange:e.onFieldChanged,placeholder:"Email"})]})]}),Object(_.jsx)("br",{}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"price",children:Object(_.jsx)("h6",{children:"Phone Number"})}),Object(_.jsx)("input",{autoComplete:"off",id:"phone_number",type:"tel",name:"phone_number",className:"form-control",value:e.phone_number,onChange:e.onFieldChanged,placeholder:"Phone Number"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"price",children:Object(_.jsx)("h6",{children:"Second Phone Number"})}),Object(_.jsx)("input",{autoComplete:"off",id:"phone_number_1",type:"tel",name:"phone_number_1",className:"form-control",value:e.phone_number_1,onChange:e.onFieldChanged,placeholder:"Second Phone Number"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"unit",children:Object(_.jsx)("h6",{children:"Password"})}),Object(_.jsx)("input",{autoComplete:"off",id:"password",type:"text",name:"password",className:"form-control",value:e.password,onChange:e.onFieldChanged,placeholder:"Password"})]})]}),Object(_.jsx)("br",{}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"category",children:Object(_.jsx)("h6",{children:"Address"})}),Object(_.jsx)("input",{autoComplete:"off",id:"address",type:"text",name:"address",className:"form-control",value:e.address,onChange:e.onFieldChanged,placeholder:"Address"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"category",children:Object(_.jsx)("h6",{children:"Age"})}),Object(_.jsx)("input",{autoComplete:"off",id:"age",type:"number",name:"age",className:"form-control",value:e.age,onChange:e.onFieldChanged,placeholder:"Age"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"category",children:Object(_.jsx)("h6",{children:"Gender"})}),Object(_.jsxs)("select",{className:"form-control",id:"gender",name:"gender",value:e.gender,onChange:e.onFieldChanged,children:[Object(_.jsx)("option",{children:"Male"}),Object(_.jsx)("option",{children:"Female"})]})]})]}),Object(_.jsx)("br",{}),Object(_.jsx)("div",{className:"row",children:Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"name",children:Object(_.jsx)("h6",{children:"Marital Status"})}),Object(_.jsxs)("select",{className:"form-control",id:"marital_status",name:"marital_status",value:e.marital_status,onChange:e.onFieldChanged,children:[Object(_.jsx)("option",{children:"Single"}),Object(_.jsx)("option",{children:"Married"}),Object(_.jsx)("option",{children:"Divorced"}),Object(_.jsx)("option",{children:"Widowed"})]})]})}),Object(_.jsx)("br",{}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"name",children:Object(_.jsx)("h6",{children:"Referee 1 Name"})}),Object(_.jsx)("input",{autoComplete:"off",id:"referee_name_1",type:"text",name:"referee_name_1",className:"form-control",value:e.referee_name_1,onChange:e.onFieldChanged,placeholder:"Referee 1 Name"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"category",children:Object(_.jsx)("h6",{children:"Referee 1 Address"})}),Object(_.jsx)("input",{autoComplete:"off",id:"referee_address_1",type:"text",name:"referee_address_1",className:"form-control",value:e.referee_address_1,onChange:e.onFieldChanged,placeholder:"Referee 1 Address"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"price",children:Object(_.jsx)("h6",{children:"Referee 1 Phone Number"})}),Object(_.jsx)("input",{autoComplete:"off",id:"referee_phone_1",type:"tel",name:"referee_phone_1",className:"form-control",value:e.referee_phone_1,onChange:e.onFieldChanged,placeholder:"Referee 1 Phone Number"})]})]}),Object(_.jsx)("br",{}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"name",children:Object(_.jsx)("h6",{children:"Referee 2 Name"})}),Object(_.jsx)("input",{autoComplete:"off",id:"referee_name_2",type:"text",name:"referee_name_2",className:"form-control",value:e.referee_name_2,onChange:e.onFieldChanged,placeholder:"Referee 2 Name"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"category",children:Object(_.jsx)("h6",{children:"Referee 2 Address"})}),Object(_.jsx)("input",{autoComplete:"off",id:"referee_address_2",type:"text",name:"referee_address_2",className:"form-control",value:e.referee_address_2,onChange:e.onFieldChanged,placeholder:"Referee 2 Address"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"price",children:Object(_.jsx)("h6",{children:"Referee 2 Phone Number"})}),Object(_.jsx)("input",{autoComplete:"off",id:"referee_phone_2",type:"tel",name:"referee_phone_2",className:"form-control",value:e.referee_phone_2,onChange:e.onFieldChanged,placeholder:"Referee 2 Phone Number"})]})]}),Object(_.jsx)("br",{}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"category",children:Object(_.jsx)("h6",{children:"Bank Name"})}),Object(_.jsx)("input",{autoComplete:"off",id:"bank_name",type:"text",name:"bank_name",className:"form-control",value:e.bank_name,onChange:e.onFieldChanged,placeholder:"Bank Name"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"name",children:Object(_.jsx)("h6",{children:"Account Name"})}),Object(_.jsx)("input",{autoComplete:"off",id:"account_name",type:"text",name:"account_name",className:"form-control",value:e.account_name,onChange:e.onFieldChanged,placeholder:"Account Name"})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("label",{htmlFor:"category",children:Object(_.jsx)("h6",{children:"Account Number"})}),Object(_.jsx)("input",{autoComplete:"off",id:"account_number",type:"text",name:"account_number",className:"form-control",value:e.account_number,onChange:e.onFieldChanged,placeholder:"Account Number"})]})]})]})}var ot={marginLeft:"16px",marginRight:"8px"},lt={marginLeft:"8px",marginRight:"16px"};w.a.setAppElement("#main");var dt=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={firstname:"",lastname:"",phone_number:"",password:"",avatar:null,file:null,ver_file:null,verification_type:"",verification_image:null,phone_number_1:"",address:"",email:"",referee_name_1:"",referee_name_2:"",referee_address_1:"",referee_address_2:"",referee_phone_1:"",referee_phone_2:"",age:0,marital_status:"Single",gender:"Male",bank_name:"",account_name:"",account_number:""},a.onFieldChanged=a.onFieldChanged.bind(Object(p.a)(a)),a.imageChanged=a.imageChanged.bind(Object(p.a)(a)),a.verificationChanged=a.verificationChanged.bind(Object(p.a)(a)),a.uploadImage=a.uploadImage.bind(Object(p.a)(a)),a.uploadVerification=a.uploadVerification.bind(Object(p.a)(a)),a.createAgent=a.createAgent.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"createAgent",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.firstname.length<=0||this.state.firstname.length>100)){e.next=2;break}return e.abrupt("return");case 2:if(!(this.state.lastname.length<=0||this.state.lastname.length>100)){e.next=4;break}return e.abrupt("return");case 4:if(!(this.state.phone_number.length<=0||this.state.phone_number.length>100)){e.next=6;break}return e.abrupt("return");case 6:if(!(this.state.password.length<=0||this.state.password.length>100)){e.next=8;break}return e.abrupt("return");case 8:return t={firstname:this.state.firstname,lastname:this.state.lastname,phone_number:this.state.phone_number,password:this.state.password,avatar:this.state.avatar,verification_type:this.state.verification_type,verification_image:this.state.verification_image,phone_number_1:this.state.phone_number_1,address:this.state.address,email:this.state.email,referee_name_1:this.state.referee_name_1,referee_name_2:this.state.referee_name_2,referee_address_1:this.state.referee_address_1,referee_address_2:this.state.referee_address_2,referee_phone_1:this.state.referee_phone_1,referee_phone_2:this.state.referee_phone_2,age:this.state.age,marital_status:this.state.marital_status,gender:this.state.gender,bank_name:this.state.bank_name,account_name:this.state.account_name,account_number:this.state.account_number},this.props.showLoading(),e.next=12,ee(t);case 12:if(n=e.sent,this.props.hideLoading(),"error"!==n){e.next=16;break}return e.abrupt("return");case 16:n.data&&"created"===n.data.response&&(this.setState({firstname:"",lastname:"",phone_number:"",password:"",avatar:null,file:null,ver_file:null,verification_type:"",verification_image:null,phone_number_1:"",address:"",email:"",referee_name_1:"",referee_name_2:"",referee_address_1:"",referee_address_2:"",referee_phone_1:"",referee_phone_2:"",age:0,marital_status:"",gender:"",bank_name:"",account_name:"",account_number:""}),this.props.reloadAgents());case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"verificationChanged",value:function(e){var t=e.target.files[0];if(t){if(!t.name.match(/\.(png|jpg|jpeg|gif|svg)$/))return void(this.error_message="File is not a Zip File");if(t.size>256e3)return void(this.error_message="File is too large");this.setState({ver_file:t,verification_image:URL.createObjectURL(t)})}}},{key:"imageChanged",value:function(e){var t=e.target.files[0];if(t){if(!t.name.match(/\.(png|jpg|jpeg|gif|svg)$/))return void(this.error_message="File is not a Zip File");if(t.size>256e3)return void(this.error_message="File is too large");this.setState({file:t,avatar:URL.createObjectURL(t)})}}},{key:"uploadImage",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.state.file){e.next=11;break}return(t=new FormData).append("avatar",this.state.file,this.state.file.name),this.props.showLoading(),e.next=6,oe(t);case 6:if(n=e.sent,this.props.hideLoading(),"error"!=n){e.next=10;break}return e.abrupt("return");case 10:n&&n.data&&n.data.response?this.setState({avatar:n.data.response}):this.setState({error:"An error occurred uploading the file. Please check the network"});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadVerification",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.state.ver_file){e.next=12;break}return(t=new FormData).append("verification_image",this.state.ver_file,this.state.ver_file.name),t.append("verification_type",this.state.verification_type),this.props.showLoading(),e.next=7,le(t);case 7:if(n=e.sent,this.props.hideLoading(),"error"!=n){e.next=11;break}return e.abrupt("return");case 11:n&&n.data&&n.data.response?this.setState({verification_image:n.data.response}):this.setState({error:"An error occurred uploading the file. Please check the network"});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onFieldChanged",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(xe.a)({},a,n))}},{key:"render",value:function(){return Object(_.jsx)("div",{children:Object(_.jsxs)(w.a,{isOpen:this.props.showAddAgent,className:"AgentModal",overlayClassName:"Overlay",contentLabel:"Minimal Modal Example",children:[Object(_.jsx)("h4",{className:"text-center",children:"Add Agent"}),Object(_.jsx)(ct,{verification_type:this.state.verification_type,uploadVerification:this.uploadVerification,verificationChanged:this.verificationChanged,uploadImage:this.uploadImage,imageChanged:this.imageChanged,onFieldChanged:this.onFieldChanged,ver_file:this.state.ver_file,file:this.state.file,firstname:this.state.firstname,lastname:this.state.lastname,password:this.state.password,phone_number:this.state.phone_number,avatar:this.state.avatar,verification_image:this.state.verification_image,phone_number_1:this.state.phone_number_1,address:this.state.address,email:this.state.email,referee_name_1:this.state.referee_name_1,referee_name_2:this.state.referee_name_2,referee_address_1:this.state.referee_address_1,referee_address_2:this.state.referee_address_2,referee_phone_1:this.state.referee_phone_1,referee_phone_2:this.state.referee_phone_2,age:this.state.age,marital_status:this.state.marital_status,gender:this.state.gender,bank_name:this.state.bank_name,account_name:this.state.account_name,account_number:this.state.account_number}),Object(_.jsx)("button",{className:"laser-inline green-bg bt-btn",style:ot,onClick:this.createAgent,children:"save"}),Object(_.jsx)("button",{className:"laser-inline grey-bg bt-btn",style:lt,onClick:this.props.handleCloseModal,children:"cancel"})]})})}}]),n}(r.Component),ht={marginLeft:"16px",marginRight:"8px"},ut={marginLeft:"8px",marginRight:"16px"};w.a.setAppElement("#main");var bt=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={firstname:"",lastname:"",phone_number:"",password:"",avatar:null,file:null,ver_file:null,verification_type:"National Id Card",verification_image:"",phone_number_1:"",address:"",email:"",referee_name_1:"",referee_name_2:"",referee_address_1:"",referee_address_2:"",referee_phone_1:"",referee_phone_2:"",age:0,marital_status:"Single",gender:"Male",bank_name:"",account_name:"",account_number:""},a.onFieldChanged=a.onFieldChanged.bind(Object(p.a)(a)),a.imageChanged=a.imageChanged.bind(Object(p.a)(a)),a.verificationChanged=a.verificationChanged.bind(Object(p.a)(a)),a.uploadImage=a.uploadImage.bind(Object(p.a)(a)),a.uploadVerification=a.uploadVerification.bind(Object(p.a)(a)),a.editAgent=a.editAgent.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.setState({firstname:this.props.agent.firstname,lastname:this.props.agent.lastname,phone_number:this.props.agent.phone_number,avatar:this.props.agent.avatar,verification_type:this.props.agent.verification_type,verification_image:this.props.agent.verification_image,phone_number_1:this.props.agent.phone_number_1,address:this.props.agent.address,email:this.props.agent.email,referee_name_1:this.props.agent.referee_name_1,referee_name_2:this.props.agent.referee_name_2,referee_address_1:this.props.agent.referee_address_1,referee_address_2:this.props.agent.referee_address_2,referee_phone_1:this.props.agent.referee_phone_1,referee_phone_2:this.props.agent.referee_phone_2,age:this.props.agent.age,marital_status:this.props.agent.marital_status,gender:this.props.agent.gender,bank_name:this.props.agent.bank_name,account_name:this.props.agent.account_name,account_number:this.props.agent.account_number})}},{key:"editAgent",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.firstname.length<=0||this.state.firstname.length>100)){e.next=2;break}return e.abrupt("return");case 2:if(!(this.state.lastname.length<=0||this.state.lastname.length>100)){e.next=4;break}return e.abrupt("return");case 4:if(!(this.state.phone_number.length<=0||this.state.phone_number.length>100)){e.next=6;break}return e.abrupt("return");case 6:return t={_id:this.props.agent._id,firstname:this.state.firstname,lastname:this.state.lastname,phone_number:this.state.phone_number,password:this.state.password,avatar:this.state.avatar,verification_type:this.state.verification_type,verification_image:this.state.verification_image,phone_number_1:this.state.phone_number_1,address:this.state.address,email:this.state.email,referee_name_1:this.state.referee_name_1,referee_name_2:this.state.referee_name_2,referee_address_1:this.state.referee_address_1,referee_address_2:this.state.referee_address_2,referee_phone_1:this.state.referee_phone_1,referee_phone_2:this.state.referee_phone_2,age:this.state.age,marital_status:this.state.marital_status,gender:this.state.gender,bank_name:this.state.bank_name,account_name:this.state.account_name,account_number:this.state.account_number},e.next=9,te(t);case 9:if("error"!==(n=e.sent)){e.next=12;break}return e.abrupt("return");case 12:n.data&&"edited"===n.data.response&&(this.setState({firstname:"",lastname:"",phone_number:"",password:"",avatar:null,file:null,ver_file:null,verification_type:"",verification_image:"",phone_number_1:"",address:"",email:"",referee_name_1:"",referee_name_2:"",referee_address_1:"",referee_address_2:"",referee_phone_1:"",referee_phone_2:"",age:0,marital_status:"",gender:"",bank_name:"",account_name:"",account_number:""}),this.props.reloadAgents());case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"verificationChanged",value:function(e){var t=e.target.files[0];if(t){if(!t.name.match(/\.(png|jpg|jpeg|gif|svg)$/))return void(this.error_message="File is not a Zip File");if(t.size>256e3)return void(this.error_message="File is too large");this.setState({ver_file:t,verification_image:URL.createObjectURL(t)})}}},{key:"imageChanged",value:function(e){var t=e.target.files[0];if(t){if(!t.name.match(/\.(png|jpg|jpeg|gif|svg)$/))return void(this.error_message="File is not a Zip File");if(t.size>256e3)return void(this.error_message="File is too large");this.setState({file:t,avatar:URL.createObjectURL(t)})}}},{key:"uploadImage",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.state.file){e.next=9;break}return(t=new FormData).append("avatar",this.state.file,this.state.file.name),e.next=5,oe(t);case 5:if("error"!=(n=e.sent)){e.next=8;break}return e.abrupt("return");case 8:n&&n.data&&n.data.response&&this.setState({avatar:n.data.response});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadVerification",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.state.ver_file){e.next=10;break}return(t=new FormData).append("verification_image",this.state.ver_file,this.state.ver_file.name),t.append("verification_type",this.state.verification_type),e.next=6,le(t);case 6:if("error"!=(n=e.sent)){e.next=9;break}return e.abrupt("return");case 9:n&&n.data&&n.data.response&&this.setState({verification_image:n.data.response});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onFieldChanged",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(xe.a)({},a,n))}},{key:"render",value:function(){return Object(_.jsx)("div",{children:Object(_.jsxs)(w.a,{isOpen:this.props.showEditAgent,className:"AgentModal",overlayClassName:"Overlay",contentLabel:"Minimal Modal Example",children:[Object(_.jsx)("h4",{className:"text-center",children:"Edit Agent"}),Object(_.jsx)(ct,{verification_type:this.state.verification_type,uploadVerification:this.uploadVerification,verificationChanged:this.verificationChanged,uploadImage:this.uploadImage,imageChanged:this.imageChanged,onFieldChanged:this.onFieldChanged,ver_file:this.state.ver_file,file:this.state.file,firstname:this.state.firstname,lastname:this.state.lastname,password:this.state.password,phone_number:this.state.phone_number,avatar:this.state.avatar,verification_image:this.state.verification_image,phone_number_1:this.state.phone_number_1,address:this.state.address,email:this.state.email,referee_name_1:this.state.referee_name_1,referee_name_2:this.state.referee_name_2,referee_address_1:this.state.referee_address_1,referee_address_2:this.state.referee_address_2,referee_phone_1:this.state.referee_phone_1,referee_phone_2:this.state.referee_phone_2,age:this.state.age,marital_status:this.state.marital_status,gender:this.state.gender,bank_name:this.state.bank_name,account_name:this.state.account_name,account_number:this.state.account_number}),Object(_.jsx)("button",{className:"laser-inline green-bg bt-btn",style:ht,onClick:this.editAgent,children:"save"}),Object(_.jsx)("button",{className:"laser-inline grey-bg bt-btn",style:ut,onClick:this.props.handleCloseModal,children:"cancel"})]})})}}]),n}(r.Component),jt={float:"left"},mt={float:"right",marginTop:"-0.01px"},pt=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={showConfirm:!1,title:"Confirm Delete",message:"Are you sure you want to delete the selected agent profile ?",isLoading:!0,showAddAgent:!1,showEditAgent:!1,selected_agent:{},agents:[]},a.handleCloseModal=a.handleCloseModal.bind(Object(p.a)(a)),a.reloadAgents=a.reloadAgents.bind(Object(p.a)(a)),a.showAddAgent=a.showAddAgent.bind(Object(p.a)(a)),a.showEditAgent=a.showEditAgent.bind(Object(p.a)(a)),a.deleteAgent=a.deleteAgent.bind(Object(p.a)(a)),a.showLoading=a.showLoading.bind(Object(p.a)(a)),a.hideLoading=a.hideLoading.bind(Object(p.a)(a)),a.hideConfirm=a.hideConfirm.bind(Object(p.a)(a)),a.showConfirm=a.showConfirm.bind(Object(p.a)(a)),a.yesClicked=a.yesClicked.bind(Object(p.a)(a)),a.noClicked=a.noClicked.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"yesClicked",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.hideConfirm(),this.showLoading(),e.next=4,n=this.state.selected_agent._id,Q("/agents/delete",{id:n}).then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 4:if(t=e.sent,this.hideLoading(),"error"!=t){e.next=8;break}return e.abrupt("return");case 8:t&&t.data&&this.reloadAgents();case 9:case"end":return e.stop()}var n}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"noClicked",value:function(){this.hideConfirm()}},{key:"showConfirm",value:function(){this.setState({showConfirm:!0})}},{key:"hideConfirm",value:function(){this.setState({showConfirm:!1})}},{key:"showLoading",value:function(){this.setState({isLoading:!0})}},{key:"hideLoading",value:function(){this.setState({isLoading:!1})}},{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoading(),e.next=3,X();case 3:if(t=e.sent,this.hideLoading(),"error"!=t){e.next=7;break}return e.abrupt("return");case 7:t&&t.data&&this.setState({agents:t.data});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadAgents",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handleCloseModal(),e.next=3,X();case 3:if("error"!=(t=e.sent)){e.next=6;break}return e.abrupt("return");case 6:t&&t.data&&this.setState({agents:t.data});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleCloseModal",value:function(){this.setState({showAddAgent:!1,showEditAgent:!1})}},{key:"showAddAgent",value:function(){this.setState({showAddAgent:!0})}},{key:"showEditAgent",value:function(e,t){this.setState({showEditAgent:!0,selected_agent:t}),e.preventDefault()}},{key:"deleteAgent",value:function(e,t){e.preventDefault(),this.setState({selected_agent:t}),this.showConfirm()}},{key:"render",value:function(){var e=this;return Object(_.jsxs)("div",{className:"top-div",children:[Object(_.jsxs)("div",{className:"container",children:[Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("h5",{className:"text-left",style:jt,children:[this.state.agents.length," Agents"]}),Object(_.jsxs)("button",{onClick:this.showAddAgent,className:"green-bg bt-btn",style:mt,children:[" ",Object(_.jsx)("i",{className:"fas fa-plus white-text"})," Add Agent"]})]}),Object(_.jsx)("div",{className:"row",children:this.state.agents.map((function(t){return Object(_.jsx)(st,{agent:t,deleteAgent:e.deleteAgent,editClicked:e.showEditAgent},t._id)}))})]}),Object(_.jsx)(M,{isLoading:this.state.isLoading}),Object(_.jsx)(B,{yesClicked:this.yesClicked,noClicked:this.noClicked,showConfirm:this.state.showConfirm,title:this.state.title,message:this.state.message}),Object(_.jsx)(dt,{showLoading:this.showLoading,hideLoading:this.hideLoading,handleCloseModal:this.handleCloseModal,showAddAgent:this.state.showAddAgent,reloadAgents:this.reloadAgents}),this.state.showEditAgent?Object(_.jsx)(bt,{agent:this.state.selected_agent,handleCloseModal:this.handleCloseModal,showEditAgent:this.state.showEditAgent,reloadAgents:this.reloadAgents}):""]})}}]),n}(r.Component),gt=n.p+"static/media/logo_white.b8588627.png",ft=new Y,Ot={float:"right",marginRight:"80px"},xt={width:"400px",height:"50px",borderRadius:"24px"},vt=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={username:"",password:"",error:"",isLoading:!1},a.performLogin=a.performLogin.bind(Object(p.a)(a)),a.onFieldChanged=a.onFieldChanged.bind(Object(p.a)(a)),a.showLoading=a.showLoading.bind(Object(p.a)(a)),a.hideLoading=a.hideLoading.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"showLoading",value:function(){this.setState({isLoading:!0})}},{key:"hideLoading",value:function(){this.setState({isLoading:!1})}},{key:"performLogin",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({error:""}),!(this.state.username.length<=0||this.state.password.length<=0)){e.next=4;break}return this.setState({error:"Please make sure all fields are completed"}),e.abrupt("return");case 4:return this.showLoading(),e.next=7,ft.login(this.state.username,this.state.password);case 7:if(t=e.sent,this.hideLoading(),"error"!=t){e.next=12;break}return this.setState({error:"An error occurred login you in. Please try again later."}),e.abrupt("return");case 12:t&&t.data&&this.props.history.push("/app");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onFieldChanged",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(xe.a)({},a,n))}},{key:"render",value:function(){return Object(_.jsxs)("div",{className:"bt-login-div",children:[Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-6 col-sm-6",children:Object(_.jsx)("div",{className:"bt-login-left",children:Object(_.jsx)("div",{children:Object(_.jsx)("img",{style:Ot,src:gt,width:"200",heiht:"200"})})})}),Object(_.jsx)("div",{className:"col-md-6 col-sm-6",children:Object(_.jsx)("div",{className:"bt-login-right",children:Object(_.jsxs)("div",{children:[Object(_.jsx)("h2",{className:"bt-blue-text",children:"Login"}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)("h5",{className:"bt-red-text",children:this.state.error?this.state.error:""}),Object(_.jsx)("br",{}),Object(_.jsx)("label",{htmlFor:"category",children:Object(_.jsx)("h5",{children:"User Name"})}),Object(_.jsx)("input",{style:xt,required:"true",autoComplete:"off",id:"username",type:"text",name:"username",onChange:this.onFieldChanged,value:this.state.username,className:"form-control bt-login-input",placeholder:"User Name"}),Object(_.jsx)("br",{}),Object(_.jsx)("label",{htmlFor:"category",children:Object(_.jsx)("h5",{children:"Password"})}),Object(_.jsx)("input",{style:xt,required:"true",autoComplete:"off",id:"password",type:"password",name:"password",onChange:this.onFieldChanged,value:this.state.password,className:"form-control bt-login-input",placeholder:"Password"}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)("button",{className:"blue-bg bt-btn",style:xt,onClick:this.performLogin,children:"CONTINUE"})]})})})]}),Object(_.jsx)(M,{isLoading:this.state.isLoading})]})}}]),n}(r.Component),_t=Object(b.g)(vt),kt=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={isLoading:!0,financials:[],finance:0},a.showLoading=a.showLoading.bind(Object(p.a)(a)),a.hideLoading=a.hideLoading.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"showLoading",value:function(){this.setState({isLoading:!0})}},{key:"hideLoading",value:function(){this.setState({isLoading:!1})}},{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoading(),e.next=3,de();case 3:if(t=e.sent,this.hideLoading(),"error"!=t){e.next=7;break}return e.abrupt("return");case 7:return t&&t.data&&this.setState({finance:t.data}),this.showLoading(),e.next=11,Q("/financials/monthly").then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 11:if(n=e.sent,this.hideLoading(),"error"!=n){e.next=15;break}return e.abrupt("return");case 15:n&&n.data&&this.setState({financials:n.data});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(_.jsxs)("div",{className:"top-div",children:[Object(_.jsxs)("div",{className:"container",children:[Object(_.jsx)("div",{className:"bt-item-drink-profit shadow",children:Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-3 col-sm-3 col-xs-6",children:Object(_.jsxs)("h5",{children:["Total Revenue - ",x(this.state.finance.revenue)]})}),Object(_.jsx)("div",{className:"col-md-3 col-sm-3 col-xs-6",children:Object(_.jsxs)("h5",{children:["Total Profit - ",x(this.state.finance.profit)]})}),Object(_.jsx)("div",{className:"col-md-3 col-sm-3 col-xs-6",children:Object(_.jsxs)("h5",{children:["Total Tax - ",x(this.state.finance.tax)]})}),Object(_.jsx)("div",{className:"col-md-3 col-sm-3 col-xs-6",children:Object(_.jsxs)("h5",{children:["Total Expenses - ",x(this.state.finance.expenses)]})})]})}),Object(_.jsx)("br",{}),Object(_.jsx)("div",{className:"row",children:this.state.financials.map((function(e,t){return Object(_.jsx)("div",{className:"col-md-6 col-sm-6",children:Object(_.jsx)("div",{className:"bt-item shadow",children:Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-3 col-sm-3",children:[Object(_.jsx)("h4",{className:"bt-blue-text",children:v(e._id.month)}),Object(_.jsx)("h5",{children:e._id.year})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsxs)("h5",{children:["Revenue - ",x(e.revenue)]}),Object(_.jsxs)("h5",{children:["Orders - ",e.orders]})]}),Object(_.jsxs)("div",{className:"col-md-5 col-sm-5",children:[Object(_.jsxs)("h5",{children:["Tax - ",x(e.tax)]}),Object(_.jsxs)("h5",{children:["Profit - ",x(e.profit)]}),Object(_.jsxs)("h5",{children:["Expenses - ",x(e.expenses)]})]})]})})},t)}))})]}),Object(_.jsx)(M,{isLoading:this.state.isLoading})]})}}]),n}(r.Component),Ct={fontSize:"17px"};function wt(e){return Object(_.jsx)("div",{className:"bt-bottom-div",children:Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("h5",{style:Ct,className:"text-center",children:"Completed Orders"}),Object(_.jsx)("h5",{style:Ct,className:"text-center",children:e.data.fulfilled})]}),Object(_.jsxs)("div",{className:"col-md-4 col-sm-4",children:[Object(_.jsx)("h5",{style:Ct,className:"text-center",children:"Pending Orders"}),Object(_.jsx)("h5",{style:Ct,className:"text-center",children:e.data.pending})]}),Object(_.jsx)("div",{className:"col-md-4 col-sm-4",children:Object(_.jsxs)(u.b,{to:"/app/orders",children:[Object(_.jsx)("button",{className:"bt-btn blue-bg bt-center",onClick:e.showOrders,children:"Show Orders"})," "]})})]})})}var yt=function(e){return Object(_.jsx)("div",{className:"col-md-3 col-sm-3",children:Object(_.jsxs)("div",{className:"shadow bt-item-promo",children:[Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-6 col-sm-6 col-xs-6",children:[Object(_.jsx)("h4",{children:e.promo.code}),Object(_.jsxs)("h5",{children:[e.promo.percentage,"% off"]}),Object(_.jsx)("br",{}),"activated"==e.promo.status?Object(_.jsx)("h5",{className:"bt-blue-text",children:e.promo.status}):Object(_.jsx)("h5",{className:"bt-red-text",children:e.promo.status})]}),Object(_.jsxs)("div",{className:"col-md-5 col-sm-5 col-xs-6",children:[Object(_.jsx)("button",{onClick:function(t){return e.editClicked(t,e.promo)},className:"shadow red-bg bt-btn",children:"edit"}),Object(_.jsx)("br",{}),"activated"==e.promo.status?Object(_.jsx)("button",{onClick:function(t){return e.deactivateClicked(t,e.promo)},className:"shadow purple-bg bt-btn",children:"deactivate"}):""]})]}),Object(_.jsx)("br",{}),Object(_.jsxs)("h5",{className:"bt-blue-text",children:[e.promo.usages," usages left"]})]})})};w.a.setAppElement("#main");var Nt={marginLeft:"16px",marginRight:"8px"},At={marginLeft:"8px",marginRight:"16px"};function St(e){return Object(_.jsx)("div",{children:Object(_.jsxs)(w.a,{isOpen:e.showGenerateCodes,className:"Modal",overlayClassName:"Overlay",contentLabel:"Minimal Modal Example",children:[Object(_.jsx)("h4",{className:"text-center",children:"Create Promocode"}),Object(_.jsx)("br",{}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-6 col-sm-6",children:[Object(_.jsx)("label",{htmlFor:"count",children:Object(_.jsx)("h6",{children:"Name of code"})}),Object(_.jsx)("input",{autoComplete:"off",id:"code_name",type:"text",name:"code_name",className:"form-control",value:e.code_name,onChange:e.onFieldChanged,placeholder:"Name of Promocode"})]}),Object(_.jsxs)("div",{className:"col-md-6 col-sm-6",children:[Object(_.jsx)("label",{htmlFor:"count",children:Object(_.jsx)("h6",{children:"Number of usages"})}),Object(_.jsx)("input",{autoComplete:"off",id:"count",type:"text",name:"count",className:"form-control",value:e.count,onChange:e.onFieldChanged,placeholder:"Promo codes to generate"})]}),Object(_.jsxs)("div",{className:"col-md-6 col-sm-6",children:[Object(_.jsx)("br",{}),Object(_.jsx)("label",{htmlFor:"percentage",children:Object(_.jsx)("h6",{children:"Percentage"})}),Object(_.jsx)("input",{autoComplete:"off",id:"percentage",type:"number",name:"percentage",className:"form-control",value:e.percentage,onChange:e.onFieldChanged,placeholder:"Percentage"})]})]}),Object(_.jsx)("br",{}),Object(_.jsx)("button",{className:"laser-inline blue-bg bt-btn",style:Nt,onClick:function(t){return e.generateClicked(t)},children:"Create"}),Object(_.jsx)("button",{className:"laser-inline grey-bg bt-btn",style:At,onClick:function(t){return e.cancelModal(t)},children:"Cancel"})]})})}w.a.setAppElement("#main");var Lt={marginLeft:"16px",marginRight:"8px"},Ft={marginLeft:"8px",marginRight:"16px"};function Dt(e){return Object(_.jsx)("div",{children:Object(_.jsxs)(w.a,{isOpen:e.showEditPromocode,className:"Modal",overlayClassName:"Overlay",contentLabel:"Minimal Modal Example",children:[Object(_.jsx)("h4",{className:"text-center",children:"Edit Promocode"}),Object(_.jsx)("br",{}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-6 col-sm-6",children:[Object(_.jsx)("label",{htmlFor:"count",children:Object(_.jsx)("h6",{children:"Name of code"})}),Object(_.jsx)("input",{autoComplete:"off",id:"code_name",type:"text",name:"code_name",className:"form-control",value:e.code_name,onChange:e.onFieldChanged,placeholder:"Name of Promocode"})]}),Object(_.jsxs)("div",{className:"col-md-6 col-sm-6",children:[Object(_.jsx)("label",{htmlFor:"count",children:Object(_.jsx)("h6",{children:"Number of usages"})}),Object(_.jsx)("input",{autoComplete:"off",id:"count",type:"text",name:"count",className:"form-control",value:e.count,onChange:e.onFieldChanged,placeholder:"Promo codes to generate"})]}),Object(_.jsxs)("div",{className:"col-md-6 col-sm-6",children:[Object(_.jsx)("br",{}),Object(_.jsx)("label",{htmlFor:"percentage",children:Object(_.jsx)("h6",{children:"Percentage"})}),Object(_.jsx)("input",{autoComplete:"off",id:"percentage",type:"number",name:"percentage",className:"form-control",value:e.percentage,onChange:e.onFieldChanged,placeholder:"Percentage"})]})]}),Object(_.jsx)("br",{}),Object(_.jsx)("button",{className:"laser-inline blue-bg bt-btn",style:Lt,onClick:function(t){return e.submitEditedPromocode(t)},children:"Save"}),Object(_.jsx)("button",{className:"laser-inline grey-bg bt-btn",style:Ft,onClick:function(t){return e.cancelModal(t)},children:"Cancel"})]})})}var Et={float:"left"},Mt={float:"right",marginTop:"-0.01px"},Pt=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).handleOnDocumentBottom=function(){a.getPromocodes()},a.state={isLoading:!0,total_count:0,promocodes:[],showGenerateCodes:!1,showEditPromocode:!1,code_to_edit:{},code_name:"",count:0,percentage:0},a.getPromocodesEmpty=a.getPromocodesEmpty.bind(Object(p.a)(a)),a.onFieldChanged=a.onFieldChanged.bind(Object(p.a)(a)),a.editClicked=a.editClicked.bind(Object(p.a)(a)),a.deactivateClicked=a.deactivateClicked.bind(Object(p.a)(a)),a.getPromocodes=a.getPromocodes.bind(Object(p.a)(a)),a.handleOnDocumentBottom=a.handleOnDocumentBottom.bind(Object(p.a)(a)),a.generateClicked=a.generateClicked.bind(Object(p.a)(a)),a.cancelModal=a.cancelModal.bind(Object(p.a)(a)),a.showGenerateCodesView=a.showGenerateCodesView.bind(Object(p.a)(a)),a.submitEditedPromocode=a.submitEditedPromocode.bind(Object(p.a)(a)),a.showLoading=a.showLoading.bind(Object(p.a)(a)),a.hideLoading=a.hideLoading.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"showLoading",value:function(){this.setState({isLoading:!0})}},{key:"hideLoading",value:function(){this.setState({isLoading:!1})}},{key:"showGenerateCodesView",value:function(){this.setState({showGenerateCodes:!0})}},{key:"generateClicked",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(this.state.code_name.length>0&&this.state.count>0&&this.state.percentage>0)){e.next=10;break}return this.showLoading(),e.next=5,a=this.state.code_name,s=this.state.count,r=this.state.percentage,Q("/promocodes/generate",{name:a,usages:s,percentage:r}).then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 5:if(n=e.sent,this.hideLoading(),"error"!=n){e.next=9;break}return e.abrupt("return");case 9:n&&n.data&&(this.setState({promocodes:[],showGenerateCodes:!1,showEditPromocode:!1,code_to_edit:{},count:0,code_name:"",percentage:0}),this.getPromocodesEmpty());case 10:case"end":return e.stop()}var a,s,r}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelModal",value:function(e){e.preventDefault(),this.setState({showGenerateCodes:!1,showEditPromocode:!1,code_to_edit:{},count:0,code_name:"",percentage:null})}},{key:"onFieldChanged",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(xe.a)({},a,n))}},{key:"getPromocodesEmpty",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoading(),e.next=3,he(0);case 3:if(t=e.sent,this.hideLoading(),"error"!=t){e.next=7;break}return e.abrupt("return");case 7:return t&&t.data&&this.setState((function(e){return e.promocodes.length>0?{promocodes:e.promocodes.concat(t.data)}:{promocodes:t.data}})),e.next=10,ue();case 10:if("error"!=(n=e.sent)){e.next=13;break}return e.abrupt("return");case 13:n&&n.data&&this.setState({total_count:n.data.count});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPromocodes",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoading(),e.next=3,he(this.state.promocodes.length);case 3:if(t=e.sent,this.hideLoading(),"error"!=t){e.next=7;break}return e.abrupt("return");case 7:return t&&t.data&&this.setState((function(e){return e.promocodes.length>0?{promocodes:e.promocodes.concat(t.data)}:{promocodes:t.data}})),e.next=10,ue();case 10:if("error"!=(n=e.sent)){e.next=13;break}return e.abrupt("return");case 13:n&&n.data&&this.setState({total_count:n.data.count});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editClicked",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({showEditPromocode:!0,code_name:n.code,code_to_edit:n,count:n.usages,percentage:n.percentage});case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"submitEditedPromocode",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.code_name.length>0&&this.state.count>0&&this.state.percentage>0)){e.next=9;break}return this.showLoading(),e.next=4,a=this.state.code_to_edit._id,s=this.state.code_name,r=this.state.count,i=this.state.percentage,Q("/promocodes/edit",{id:a,name:s,usages:r,percentage:i}).then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 4:if(t=e.sent,this.hideLoading(),"error"!=t){e.next=8;break}return e.abrupt("return");case 8:t&&t.data&&this.setState((function(e){var a=e.promocodes;return a.splice(e.promocodes.indexOf(n.state.code_to_edit),1,t.data),{promocodes:a,showGenerateCodes:!1,showEditPromocode:!1,code_to_edit:{},count:0,code_name:"",percentage:null}}));case 9:case"end":return e.stop()}var a,s,r,i}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deactivateClicked",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.showLoading(),e.next=4,s=n._id,Q("/promocodes/deactivate",{id:s}).then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 4:if(a=e.sent,this.hideLoading(),"error"!=a){e.next=8;break}return e.abrupt("return");case 8:a&&a.data&&this.setState((function(e){var t=e.promocodes;return t.splice(e.promocodes.indexOf(n),1,a.data),{promocodes:t}}));case 9:case"end":return e.stop()}var s}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getPromocodes()}},{key:"render",value:function(){var e=this;return Object(_.jsxs)("div",{className:"top-div",children:[Object(_.jsxs)("div",{className:"container",children:[Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("h5",{className:"text-left",style:Et,children:[this.state.total_count," Promocodes"]}),Object(_.jsxs)("button",{onClick:this.showGenerateCodesView,className:"green-bg bt-btn",style:Mt,children:[" ",Object(_.jsx)("i",{className:"fas fa-plus white-text"}),"  Create Code"]})]}),Object(_.jsx)("div",{className:"row",children:this.state.promocodes.map((function(t){return Object(_.jsx)(yt,{promo:t,editClicked:e.editClicked,deactivateClicked:e.deactivateClicked},t._id)}))})]}),Object(_.jsx)(M,{isLoading:this.state.isLoading}),Object(_.jsx)(G.a,{onBottom:this.handleOnDocumentBottom}),this.state.showEditPromocode?Object(_.jsx)(Dt,{onFieldChanged:this.onFieldChanged,cancelModal:this.cancelModal,showEditPromocode:this.state.showEditPromocode,submitEditedPromocode:this.submitEditedPromocode,code_name:this.state.code_name,count:this.state.count,percentage:this.state.percentage}):"",this.state.showGenerateCodes?Object(_.jsx)(St,{onFieldChanged:this.onFieldChanged,code_name:this.state.code_name,count:this.state.count,percentage:this.state.percentage,generateClicked:this.generateClicked,cancelModal:this.cancelModal,showGenerateCodes:this.state.showGenerateCodes}):""]})}}]),n}(r.Component);function It(e){return Object(_.jsx)("div",{className:"bt-message-div",children:Object(_.jsx)("div",{className:"container",children:Object(_.jsx)("h5",{className:"text-center",children:e.message})})})}n.p;var Rt=n.p+"static/media/alert.58684d6f.mp3",Tt=n(46),Ut=n.n(Tt);n(138),n(139);var Bt={padding:"0px",marginTop:"6px"},Vt={backgroundColor:"#287428"},Wt={backgroundColor:"#A93226"},Kt=["neworder","orderstatus","routerequest"],Gt=null,Ht=new z.a({publishKey:"pub-c-da5b31c8-45d5-4018-82be-843221a3b91c",subscribeKey:"sub-c-de1f05de-af97-11e9-a732-8a2b99383297",uuid:"Bartender247ng"});function zt(){return Object(_.jsx)(q.a,{client:Ht,children:Object(_.jsx)(qt,{})})}var qt=function(){var e=Object(q.b)(),t=Object(r.useState)(5),n=Object(h.a)(t,2),s=n[0],i=n[1],c=Object(r.useState)(!1),o=Object(h.a)(c,2),j=o[0],m=o[1],p=Object(r.useState)(""),g=Object(h.a)(p,2),f=g[0],O=g[1],x=Object(r.useState)({}),v=Object(h.a)(x,2),k=v[0],C=v[1],w=Object(r.useState)(!1),y=Object(h.a)(w,2),N=y[0],A=y[1],S=Object(r.useState)(!1),L=Object(h.a)(S,2),F=L[0],D=L[1],E=Object(r.useState)(!1),M=Object(h.a)(E,2),P=M[0],I=M[1];function R(e){window.clearInterval(Gt),O(e),m(!0),Gt=setInterval((function(){var e=s;0==(e-=1)?(window.clearInterval(Gt),i(5),j(!1),O("")):i(s)}),1e3)}Object(r.useEffect)((function(){return e.subscribe({channels:Kt}),e.addListener({status:function(e){"PNNetworkUpCategory"===e.category&&(I(!0),T()),"PNConnectedCategory"===e.category&&(I(!0),T()),"PNReconnectedCategory"===e.category&&(I(!0),T()),"PNNetworkIssuesCategory"===e.category&&I(!1),"PNNetworkDownCategory"===e.category&&I(!1),"PNTimeoutCategory"===e.category&&I(!1)},message:function(e){switch(e.channel){case"neworder":T(),A(!0),D(!0)}}}),T(),function(){e.unsubscribe({channels:Kt}),window.clearInterval(Gt)}}),[e,Kt]);var T=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q("/orders/stats").then((function(e){return e})).catch((function(e){return console.log(e),"error"}));case 2:if("error"!=(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:t&&t.data&&C(t.data.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(_.jsxs)(u.a,{children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("nav",{className:"navbar navbar-default navbar-fixed-top",children:Object(_.jsxs)("div",{className:"container",children:[Object(_.jsxs)("div",{className:"navbar-header",children:[Object(_.jsxs)("button",{type:"button",className:"navbar-toggle collapsed","data-toggle":"collapse","data-target":"#bs-example-navbar-collapse-1","aria-expanded":"false",children:[Object(_.jsx)("span",{className:"sr-only",children:"Toggle navigation"}),Object(_.jsx)("span",{className:"icon-bar"}),Object(_.jsx)("span",{className:"icon-bar"}),Object(_.jsx)("span",{className:"icon-bar"})]}),Object(_.jsxs)("div",{className:"bartender-logo",children:[Object(_.jsx)("span",{style:P?Vt:Wt,className:"bt-online-indicator laser-inline"})," ",Object(_.jsx)(u.b,{to:"/",className:"nav-link laser-inline",children:Object(_.jsx)("a",{className:"navbar-brand med-blue-text",children:"Bartender"})})]})]}),Object(_.jsx)("div",{className:"collapse navbar-collapse",id:"bs-example-navbar-collapse-1",children:Object(_.jsxs)("ul",{className:"nav navbar-nav navbar-right",children:[Object(_.jsx)("li",{children:Object(_.jsx)(u.b,{to:"/app",className:"nav-link",children:"Dashboard"})}),Object(_.jsx)("li",{children:Object(_.jsx)(u.b,{to:"/app/orders",className:"nav-link",children:"Orders"})}),Object(_.jsx)("li",{children:Object(_.jsx)(u.b,{to:"/app/financials",className:"nav-link",children:"Financials"})}),Object(_.jsx)("li",{children:Object(_.jsx)(u.b,{to:"/app/drinks",className:"nav-link",children:"Drinks"})}),Object(_.jsx)("li",{children:Object(_.jsx)(u.b,{to:"/app/categories",className:"nav-link",children:"Categories"})}),Object(_.jsx)("li",{children:Object(_.jsx)(u.b,{to:"/app/agents",className:"nav-link",children:"Agents"})}),Object(_.jsx)("li",{children:Object(_.jsx)(u.b,{to:"/app/users",className:"nav-link",children:"Users"})}),Object(_.jsx)("li",{children:Object(_.jsx)(u.b,{to:"/app/promocodes",className:"nav-link",children:"Promocodes"})}),N?Object(_.jsx)("li",{children:Object(_.jsx)(u.b,{to:"/app/orders",style:Bt,children:Object(_.jsx)("button",{className:"bt-btn-nav red-bg",children:"New"})})}):""]})})]})}),Object(_.jsx)("div",{className:"bartender-content",children:Object(_.jsxs)(b.d,{children:[Object(_.jsx)(b.b,{path:"/app",exact:!0,component:at}),Object(_.jsx)(b.b,{path:"/app/drinks",render:function(e){return Object(_.jsx)(Pe,Object(a.a)(Object(a.a)({},e),{},{showMessage:R}))}}),Object(_.jsx)(b.b,{path:"/app/categories",component:qe}),Object(_.jsx)(b.b,{path:"/app/orders",render:function(e){return Object(_.jsx)(fe,Object(a.a)(Object(a.a)({},e),{},{showMessage:R}))}}),Object(_.jsx)(b.b,{path:"/app/financials",component:kt}),Object(_.jsx)(b.b,{path:"/app/agents",component:pt}),Object(_.jsx)(b.b,{path:"/app/users",component:Je}),Object(_.jsx)(b.b,{path:"/app/promocodes",component:Pt})]})})]}),k?Object(_.jsx)(wt,{data:k}):"",j?Object(_.jsx)(It,{message:f}):"",F?Object(_.jsx)(Ut.a,{url:Rt,playStatus:Ut.a.status.PLAYING,playFromPosition:1,onFinishedPlaying:function(){D(!1)}}):""]})},$t=function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){return Object(j.a)(this,n),t.call(this,e)}return Object(m.a)(n,[{key:"render",value:function(){return Object(_.jsx)("div",{className:"top-top-div",children:Object(_.jsx)("div",{className:"container",children:Object(_.jsxs)("div",{className:"bt-row",children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("img",{src:"./images/logo_white.png",width:"287",height:"214"}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsxs)("h2",{className:"bt-top-h1",children:[Object(_.jsx)("img",{src:"../images/cart.png",width:"40",height:"40"})," ",Object(_.jsx)("b",{children:"Purchase your beverages"})]}),Object(_.jsx)("br",{}),Object(_.jsxs)("h2",{className:"bt-top-h1",children:[Object(_.jsx)("img",{src:"./images/delivery.png",width:"40",height:"40"})," ",Object(_.jsx)("b",{children:"Get it delivered to your house"})]}),Object(_.jsx)("br",{}),Object(_.jsxs)("h2",{className:"bt-top-h1",children:[Object(_.jsx)("img",{src:"./images/track.png",width:"40",height:"40"})," ",Object(_.jsx)("b",{children:"Track your order"})]}),Object(_.jsx)("br",{})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("h2",{className:"bt-white-text",children:Object(_.jsx)("b",{children:"We currently deliver to Lagos:"})}),Object(_.jsx)("br",{}),Object(_.jsx)("h3",{className:"bt-white-text",children:"Lekki"}),Object(_.jsx)("h3",{className:"bt-white-text",children:"Victoria Island"}),Object(_.jsx)("h3",{className:"bt-white-text",children:"Ikoyi"}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsxs)("div",{children:[Object(_.jsxs)("a",{href:"https://play.google.com/store/apps/details?id=com.epicteck.bartender&hl=en",children:[Object(_.jsx)("img",{src:"./images/google_play.png",width:"185"})," "]}),Object(_.jsx)("a",{href:"https://apps.apple.com/us/app/bartender-nigeria/id1486608166?ls=1",children:Object(_.jsx)("img",{src:"./images/app_store.png",width:"150"})})]})]})]})})})}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Zt=["component"],Jt=["component"],Yt=new Y,Qt=function(e){var t=e.component,n=Object(s.a)(e,Zt);return Object(_.jsx)(b.b,Object(a.a)(Object(a.a)({},n),{},{render:function(e){return!0===Yt.loggedIn()?Object(_.jsx)(t,Object(a.a)({},e)):Object(_.jsx)(b.a,{to:"/auth/login"})}}))},Xt=function(e){var t=e.component,n=Object(s.a)(e,Jt);return Object(_.jsx)(b.b,Object(a.a)(Object(a.a)({},n),{},{render:function(e){return!1===Yt.loggedIn()?Object(_.jsx)(t,Object(a.a)({},e)):Object(_.jsx)(b.a,{to:"/app"})}}))},en=Object(_.jsx)(u.a,{children:Object(_.jsx)("div",{children:Object(_.jsxs)(b.d,{children:[Object(_.jsx)(b.b,{path:"view",exact:!0,component:$t}),Object(_.jsx)(Qt,{path:"/view",component:zt}),Object(_.jsx)(Qt,{path:"/app",component:zt}),Object(_.jsx)(Xt,{path:"/auth/login",component:_t})]})})});c.a.render(en,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[141,1,2]]]);
//# sourceMappingURL=main.db46391a.chunk.js.map